{"version":3,"sources":["contexts/CurrentUserContext.js","utils/MoviesApi.js","utils/AuthApi.js","utils/constants.js","utils/MainApi.js","components/Footer/Footer.js","images/headerLogo.svg","components/NavLanding/NavLanding.js","components/AccountButton/AccountButton.js","components/NavMovies/NavMovies.js","components/Header/Header.js","images/studentPhoto.jpg","components/AboutMe/AboutMe.js","components/AboutProject/AboutProject.js","components/Portfolio/Portfolio.js","components/Promo/Promo.js","components/Techs/Techs.js","components/Main/Main.js","components/FilterCheckbox/FilterCheckbox.js","hooks/useForm.js","components/SearchForm/SearchForm.js","components/MovieNotFound/MovieNotFound.js","components/MoviesCard/MoviesCard.js","utils/getTimeFromMins.js","components/MoviesCardList/MoviesCardList.js","components/Preloader/Preloader.js","components/Movies/Movies.js","components/SavedMovies/SavedMovies.js","components/FormButton/FormButton.js","components/FormError/FormError.js","utils/handleServerError.js","components/AuthForm/AuthForm.js","components/Login/Login.js","components/Register/Register.js","components/NotFound/NotFound.js","components/Profile/Profile.js","components/Sidebar/Sidebar.js","components/ProtectedRoute/ProtectedRoute.js","utils/filterMovies.js","utils/getNumberOfMovies.js","components/App/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","moviesApi","options","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","_checkResponse","Accept","auth","_baseUrl","console","log","name","email","password","credentials","body","JSON","stringify","data","localStorage","setItem","token","Authorization","REGEX","FETCH_MOVIES_ERR","IMG_BASE_URL","api","movie","country","director","duration","year","description","image","trailer","trailerLink","match","thumbnail","formats","movieId","id","nameRU","nameEN","Footer","className","href","rel","target","NavLanding","to","AccountButton","NavMovies","handleBurgerClick","path","useLocation","pathname","activeClassName","onClick","Header","headerDark","loggedIn","src","headerLogo","alt","AboutMe","studentPhoto","AboutProject","Portfolio","Promo","Techs","Main","FilterCheckbox","handleCheck","isShortFilms","checkboxActive","htmlFor","type","onChange","checked","useFormWithValidation","useState","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","evt","input","value","validationMessage","closest","checkValidity","SearchForm","handleMovieSearch","localArr","savedMov","isError","setIsError","errorSelector","noValidate","onSubmit","preventDefault","placeholder","MovieNotFound","MoviesCard","mins","card","onSaveMovie","onDeleteMovie","isSavedMovie","savedMovie","_id","Math","trunc","MoviesCardList","cardList","setMaxNumberOfMovies","maxNumberOfMovies","step","isLoading","notFound","allMovies","moviesToRender","slice","map","length","Preloader","Movies","cards","isCheckedForShortFilms","setStep","savedMovies","foundMovies","customErr","fetchErrMsg","movies","SavedMovies","isCheckedForSavedShortFilms","foundSavedMovies","FormButton","btnName","disabled","FormError","serverErrMsg","error","AuthForm","title","signUp","authQuestion","authLinkTxt","linkPath","onChangeInput","resetServerError","hideError","minLength","maxLength","onFocus","required","Login","Register","NotFound","history","useHistory","goBack","Profile","handleLogOut","handleUpdateUser","successMsg","isInputDisabled","setIsInputDisabled","useContext","useEffect","Sidebar","isOpen","onClose","onMouseDown","event","currentTarget","ProtectedRoute","Component","component","props","jwt","getItem","filterMovies","localMoviesArr","query","shortFilms","filteredMovies","filter","toUpperCase","includes","getNumberOfMovies","width","App","currentUser","setCurrentUser","setIsLoading","setLoggedIn","isSidebarOpen","setIsSidebarOpen","setFoundMovies","setFoundSavedMovies","setSavedMovies","window","innerWidth","setWidth","isResizing","setIsResizing","setIsCheckedForShortFilms","setIsCheckedForSavedShortFilms","setCustomErr","setServerErrMsg","isNotFound","setIsNotFound","isNotFoundSaved","setIsNotFoundSaved","setSuccessMsg","setFetchErrMsg","handleServerError","err","handleLogin","signIn","getUserData","catch","push","finally","parse","handleNoFoundMovies","handleNoFoundSavedMovies","getSavedMovies","find","item","handleRemoveSavedMovie","deleteMovie","deletedMovie","newSavedMovies","getContent","checkToken","queryM","querySM","getMovies","useLayoutEffect","updateWidth","setTimeout","addEventListener","removeEventListener","Provider","exact","saveMovieCard","savedCard","clear","uploadUserInfo","user","register","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.279aa527.chunk.js","sourcesContent":["import React from \"react\";\nexport const CurrentUserContext = React.createContext();","class Api {\n  constructor(options) {\n    this._url = options.url;\n    this._headers = options.headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  getMovies() {\n    return fetch(`${this._url}`, {\n      method: \"GET\",\n      // credentials: 'include',\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n}\n\nconst moviesApi = new Api({\n  url: \"https://api.nomoreparties.co/beatfilm-movies\",\n  headers: {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default moviesApi;\n","class Auth {\n  constructor() {\n    // this._baseUrl = \"https://api.olgaliubar.nomoredomains.club\";\n    this._baseUrl = \"http://localhost:3001\";\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    console.log(res.json());\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  register(name, email, password) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        name: name,\n        email: email,\n        password: password,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  signIn({ email, password }) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        password: password,\n        email: email,\n      }),\n    })\n      .then(this._checkResponse)\n      .then((data) => {\n        localStorage.setItem(\"token\", data.token);\n        return data;\n      });\n  }\n\n  getContent(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    }).then(this._checkResponse);\n  }\n}\n\nexport const auth = new Auth();\n","export const SUCCESS_MSG = \"Данные успешно сохранены!\";\nexport const REGEX = /http(s)?:\\/\\/w{0,3}?[a-zA-Z0-9]+[a-zA-Z0-9\\-._~:/?#[\\]@!$&'()*+,;=]*/;\nexport const TRAILER = \"https://www.youtube.com/watch?v=uA4k5Vc5jFc\";\nexport const FETCH_MOVIES_ERR =\n  \"Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз\";\nexport const IMG_BASE_URL = \"https://api.nomoreparties.co\";\n","import { IMG_BASE_URL, TRAILER, REGEX } from \"../utils/constants\";\n\nclass Api {\n  constructor(options) {\n    this._url = options.url;\n    this._headers = options.headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(res);\n  }\n\n  getSavedMovies() {\n    return fetch(`${this._url}/movies`, {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  getUserData() {\n    return fetch(`${this._url}/users/me`, {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  saveMovieCard(movie) {\n    return fetch(`${this._url}/movies`, {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: this._headers,\n      body: JSON.stringify({\n        country: `${\n          movie.country !== (undefined || \"\" || null)\n            ? movie.country\n            : \"no info\"\n        }`,\n        director: `${\n          movie.director !== (undefined || \"\" || null)\n            ? movie.director\n            : \"no info\"\n        }`,\n        duration: movie.duration,\n        year: movie.year,\n        description: movie.description,\n        image: `${IMG_BASE_URL}${movie.image.url}`,\n        trailer: `${\n          movie.trailerLink === null || \"\" || !movie.trailerLink.match(REGEX)\n            ? TRAILER\n            : movie.trailerLink\n        }`,\n        thumbnail: `${IMG_BASE_URL}${movie.image.formats.thumbnail.url}`,\n        movieId: movie.id,\n        nameRU: `${movie.nameRU === (\"\" || null) ? \"no info\" : movie.nameRU}`,\n        nameEN: `${movie.nameEN === (\"\" || null) ? \"no info\" : movie.nameEN}`,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  deleteMovie(movieId) {\n    return fetch(`${this._url}/movies/${movieId}`, {\n      method: \"DELETE\",\n      credentials: \"include\",\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  uploadUserInfo(data) {\n    return fetch(`${this._url}/users/me`, {\n      method: \"PATCH\",\n      credentials: \"include\",\n      headers: this._headers,\n      body: JSON.stringify(data),\n    }).then(this._checkResponse);\n  }\n}\n\nconst api = new Api({\n  // url: \"https://api.olgaliubar.nomoredomains.club\",\n  url: \"http://localhost:3001\",\n  headers: {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\",\n    // authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n  },\n});\n\nexport default api;\n","import React from \"react\";\n\nexport default function Footer() {\n  return (\n    <section className=\"footer\">\n      <p className=\"footer__credits\">\n        Учебный проект Яндекс.Практикум х BeatFilm.\n      </p>\n      <div className=\"footer__wrapper\">\n        <p className=\"footer__copy\">&#169; 2021</p>\n\n        <ul className=\"footer__list\">\n          <li className=\"footer__item\">\n            <a\n              className=\"footer__link\"\n              href=\"https://practicum.yandex.ru/\"\n              rel=\"noreferrer\"\n              target=\"_blank\"\n            >\n              Яндекс.Практикум\n            </a>\n          </li>\n          <li className=\"footer__item\">\n            <a\n              className=\"footer__link\"\n              href=\"https://github.com/\"\n              rel=\"noreferrer\"\n              target=\"_blank\"\n            >\n              Github\n            </a>\n          </li>\n          <li className=\"footer__item\">\n            <a\n              className=\"footer__link\"\n              href=\"https://www.facebook.com/\"\n              rel=\"noreferrer\"\n              target=\"_blank\"\n            >\n              Facebook\n            </a>\n          </li>\n        </ul>\n      </div>\n    </section>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/headerLogo.bca2ab18.svg\";","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function NavLanding() {\n  return (\n    <ul className=\"nav-landing\">\n      <li className=\"nav-landing__btn\">\n        <Link to={`/signup`} className=\"nav-landing__register-btn\">\n          Регистрация\n        </Link>\n      </li>\n      <li className=\"nav-landing__btn\">\n        <Link to={`/signin`} className=\"nav-landing__login-btn\">\n          Войти\n        </Link>\n      </li>\n    </ul>\n  );\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function AccountButton() {\n  return (\n    <Link to=\"/profile\" className=\"account-btn\">\n      Аккаунт\n      <span className=\"account-btn__icon\" />\n    </Link>\n  );\n}\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport AccountButton from \"../AccountButton/AccountButton\";\nimport PropTypes from \"prop-types\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function NavMovies({ handleBurgerClick }) {\n  const path = useLocation().pathname;\n\n  return (\n    <section className=\"nav-main \">\n      <nav\n        className={\n          path === \"/\" ? \"nav-main__visible_promo\" : \"nav-main__visible\"\n        }\n      >\n        <ul className=\"nav-main__list\">\n          <li className=\"nav-main__item\">\n            <NavLink\n              to=\"/movies\"\n              className={\n                path === \"/\" ? \"nav-main__link_promo\" : \"nav-main__link\"\n              }\n              activeClassName=\"nav-main__link_active\"\n            >\n              Фильмы\n            </NavLink>\n          </li>\n          <li className=\"nav-main__item\">\n            <NavLink\n              to=\"/saved-movies\"\n              className={\n                path === \"/\" ? \"nav-main__link_promo\" : \"nav-main__link\"\n              }\n              activeClassName=\"nav-main__link_active\"\n            >\n              Сохранённые фильмы\n            </NavLink>\n          </li>\n        </ul>\n        <AccountButton />\n      </nav>\n      <div\n        className={path === \"/\" ? \"nav-main__burger_promo\" : \"nav-main__burger\"}\n        onClick={handleBurgerClick}\n      ></div>\n    </section>\n  );\n}\n\nNavMovies.propTypes = {\n  handleBurgerClick: PropTypes.func,\n};\n","import React from \"react\";\nimport headerLogo from \"../../images/headerLogo.svg\";\nimport NavLanding from \"../NavLanding/NavLanding\";\nimport NavMovies from \"../NavMovies/NavMovies\";\nimport { Link } from 'react-router-dom';\n\nexport default function Header({ headerDark, loggedIn, handleBurgerClick }) {\n  return (\n    <header className={`header ${headerDark || \"\"}`}>\n      <Link to=\"/\">\n      <img src={headerLogo} alt=\"Movie\" className=\"header__logo\" />\n      </Link>\n      {!loggedIn ? (\n        <NavLanding/>\n      ) : (\n        <NavMovies handleBurgerClick={handleBurgerClick} />\n      )}\n    </header>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/studentPhoto.c37f918b.jpg\";","import React from \"react\";\nimport studentPhoto from \"../../images/studentPhoto.jpg\";\n\nfunction AboutMe() {\n  return (\n    <section className=\"about-me\">\n      <h2 className=\"about-me__title\">Студент</h2>\n      <div className=\"about-me__profile\">\n        <div className=\"about-me__text-wrapper\">\n          <h3 className=\"about-me__section-title\">Ольга</h3>\n          <p className=\"about-me__section-subtitle\">\n            Фронтенд-разработчица, 31 год\n          </p>\n          <p className=\"about-me__text\">\n            Родилась и живу в Санкт-Петербурге, закончила магистратуру по\n            аглийской литературе и лингвистике Университета Гранады. Шесть лет\n            проработала переводчиком с испанского на руднике в Гватемале. После\n            окончания курса по веб-разработке планирую найти работу в новой\n            сфере.\n          </p>\n          <ul className=\"about-me__social\">\n            <li className=\"about-me__social-item\">\n              <a\n                className=\"about-me__link\"\n                href=\"https://www.facebook.com/olga.lubar\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                Facebook\n              </a>\n            </li>\n            <li className=\"about-me__social-item\">\n              <a\n                className=\"about-me__link\"\n                href=\"https://github.com/OlgaLiubar\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                Github\n              </a>\n            </li>\n          </ul>\n        </div>\n        <img\n          className=\"about-me__photo\"\n          src={studentPhoto}\n          alt=\"Фотография студента\"\n        />\n      </div>\n    </section>\n  );\n}\n\nexport default AboutMe;\n","import React from \"react\";\n\nfunction AboutProject() {\n  return (\n    <section className=\"about-project\">\n      <h2 className=\"about-project__title\">О проекте</h2>\n      <ul className=\"about-project__articles\">\n        <li>\n          <h3 className=\"about-project__subtitle\">\n            Дипломный проект включал 5 этапов\n          </h3>\n          <p className=\"about-project__text\">\n            Составление плана, работу над бэкендом, вёрстку, добавление\n            функциональности и финальные доработки.\n          </p>\n        </li>\n        <li>\n          <h3 className=\"about-project__subtitle\">\n            На выполнение диплома ушло 5 недель\n          </h3>\n          <p className=\"about-project__text\">\n            У каждого этапа был мягкий и жёсткий дедлайн, которые нужно было\n            соблюдать, чтобы успешно защититься.\n          </p>\n        </li>\n      </ul>\n\n      <div className=\"about-project__timebar\">\n        <div className=\"about-project__timebar-back\">\n          <div className=\"about-project__timebar-duration about-project__timebar-duration_back-weeks\">\n            1 неделя\n          </div>\n          <p className=\"about-project__timebar-caption\">Back-end</p>\n        </div>\n        <div className=\"about-project__timebar-front\">\n          <div className=\"about-project__timebar-duration about-project__timebar-duration_front-weeks\">\n            4 недели\n          </div>\n          <p className=\"about-project__timebar-caption\">Front-end</p>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nexport default AboutProject;\n","import React from \"react\";\n\nfunction Portfolio() {\n  return (\n    <section className=\"portfolio\">\n      <h3 className=\"portfolio__section-title\">Портфолио</h3>\n      <ul className=\"portfolio__list\">\n        <li className=\"portfolio__list-item\">\n          <a\n            className=\"portfolio__link\"\n            href=\"https://www.facebook.com/olga.lubar\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            <p className=\"portfolio__link-txt\">Статичный сайт</p>\n            <span className=\"portfolio__arrow\">&#8599;</span>\n          </a>\n        </li>\n        <li className=\"portfolio__list-item\">\n          <a\n            className=\"portfolio__link\"\n            href=\"https://github.com/OlgaLiubar\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            <p className=\"portfolio__link-txt\">Адаптивный сайт</p>\n            <span className=\"portfolio__arrow\">&#8599;</span>\n          </a>\n        </li>\n        <li className=\"portfolio__list-item\">\n          <a\n            className=\"portfolio__link\"\n            href=\"https://github.com/OlgaLiubar\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            <p className=\"portfolio__link-txt\">Одностраничное приложение</p>\n            <span className=\"portfolio__arrow\">&#8599;</span>\n          </a>\n        </li>\n      </ul>\n    </section>\n  );\n}\n\nexport default Portfolio;\n","import React from \"react\";\n\nexport default function Promo() {\n  return (\n    <section className=\"promo\">\n      <h1 className=\"promo__title\">\n        Учебный проект студентки факультета Веб-разработки.\n      </h1>\n    </section>\n  );\n}\n","import React from \"react\";\n\nfunction Techs() {\n  return (\n    <section className=\"techs\">\n      <h2 className=\"techs__title\">Технологии</h2>\n      <h3 className=\"techs__section-title\">7 технологий</h3>\n      <p className=\"techs__section-subtitle\">\n        На курсе веб-разработки мы освоили технологии, которые применили в\n        дипломном проекте.\n      </p>\n      <ul className=\"techs__list\">\n        <li className=\"techs__item\">HTML</li>\n        <li className=\"techs__item\">CSS</li>\n        <li className=\"techs__item\">JS</li>\n        <li className=\"techs__item\">React</li>\n        <li className=\"techs__item\">Git</li>\n        <li className=\"techs__item\">Express.js</li>\n        <li className=\"techs__item\">mongoDB</li>\n      </ul>\n    </section>\n  );\n}\n\nexport default Techs;\n","import React from \"react\";\nimport Footer from \"../Footer/Footer\";\nimport Header from \"../Header/Header\";\nimport AboutMe from \"../AboutMe/AboutMe\";\nimport AboutProject from \"../AboutProject/AboutProject\";\nimport Portfolio from \"../Portfolio/Portfolio\";\nimport Promo from \"../Promo/Promo\";\nimport Techs from \"../Techs/Techs\";\n\nexport default function Main({ loggedIn, handleBurgerClick }) {\n  return (\n    <>\n      <Header\n        loggedIn={loggedIn}\n        headerDark=\"header_dark\"\n        handleBurgerClick={handleBurgerClick}\n      />\n      <Promo />\n      <AboutProject />\n      <Techs />\n      <AboutMe />\n      <Portfolio />\n      <Footer />\n    </>\n  );\n}\n","import React from \"react\";\n\nexport default function FilterCheckbox({ handleCheck, isShortFilms }) {\n  function handleChange() {\n    handleCheck();\n  }\n\n  const checkboxActive = isShortFilms\n    ? \"checkbox__input-visible_checked\"\n    : \"checkbox__input-visible\";\n  return (\n    <label className=\"checkbox\" htmlFor=\"filtercheckbox\">\n      <input\n        className=\"checkbox__input\"\n        type=\"checkbox\"\n        onChange={handleChange}\n        checked={isShortFilms}\n        id=\"filtercheckbox\"\n      />\n      <span className={checkboxActive} />\n      Короткометражки\n    </label>\n  );\n}\n","import React, { useCallback } from \"react\";\n\nexport function useFormWithValidation() {\n    const [values, setValues] = React.useState({});\n    const [errors, setErrors] = React.useState({});\n    const [isValid, setIsValid] = React.useState(false);\n  \n    const handleChange = (evt) => {\n      const input = evt.target;\n      const value = input.value;\n      const name = input.name;\n      setValues({ ...values, [name]: value });\n      setErrors({ ...errors, [name]: input.validationMessage });\n      setIsValid(input.closest(\"form\").checkValidity());\n    };\n  \n    const resetForm = useCallback(\n      (newValues = {}, newErrors = {}, newIsValid = false) => {\n        setValues(newValues);\n        setErrors(newErrors);\n        setIsValid(newIsValid);\n      },\n      [setValues, setErrors, setIsValid]\n    );\n  \n    return { values, handleChange, resetForm, errors, isValid, setValues };\n  }","import React from \"react\";\nimport FilterCheckbox from \"../FilterCheckbox/FilterCheckbox\";\nimport { useFormWithValidation } from \"../../hooks/useForm\";\n\nexport default function SearchForm({\n  handleMovieSearch,\n  handleCheck,\n  isShortFilms,\n  localArr,\n  savedMov,\n}) {\n  const { values, handleChange, isValid } = useFormWithValidation({});\n  const [isError, setIsError] = React.useState(false);\n  const errorSelector = isError ? \"error \" : \"error_invisible\";\n\n  const handleChangeInput = (evt) => {\n    handleChange(evt);\n    setIsError(false);\n  };\n\n  function handleSubmit(evt) {\n    setIsError(false);\n    if (evt) {\n      evt.preventDefault();\n    }\n    if (!isValid) {\n      setIsError(true);\n    } else if (!savedMov) {\n      handleMovieSearch(values.input, localArr);\n      localStorage.setItem(\"queryM\", values.input);\n    } else if (savedMov) {\n      localStorage.setItem(\"querySM\", values.input);\n      return handleMovieSearch(values.input, localArr);\n    }\n    return;\n  }\n\n  return (\n    <section className=\"search\">\n      <span className={errorSelector}>Нужно ввести ключевое слово</span>\n      <form className=\"search__form\" noValidate onSubmit={handleSubmit}>\n        <div className=\"search__container\">\n          <input\n            className=\"search__input\"\n            type=\"text\"\n            name=\"input\"\n            placeholder=\"Фильм\"\n            onChange={handleChangeInput}\n          />\n          <button\n            className=\"search__button\"\n            type=\"submit\"\n            value=\"Найти фильм\"\n            id=\"search__button\"\n          />\n        </div>\n        <FilterCheckbox handleCheck={handleCheck} isShortFilms={isShortFilms} />\n      </form>\n    </section>\n  );\n}\n","import React from \"react\";\n\nconst MovieNotFound = () => <p className=\"no-movies\">Ничего не найдено :(</p>;\n\nexport default MovieNotFound;\n","import React from \"react\";\nimport getTimeFromMins from \"../../utils/getTimeFromMins\";\nimport { useLocation } from \"react-router-dom\";\nconst IMG_BASE_URL = \"https://api.nomoreparties.co\";\n\nexport default function MoviesCard({\n  card,\n  onSaveMovie,\n  onDeleteMovie,\n  isSavedMovie,\n}) {\n  const path = useLocation().pathname;\n\n  const savedMovie = isSavedMovie(card);\n\n  function handleButtonChange() {\n    let btnClassName = \"\";\n    if (path === \"/saved-movies\") {\n      btnClassName = \"card__save-button_delete\";\n    } else if (savedMovie) {\n      btnClassName = \"card__save-button_checked\";\n    } else {\n      btnClassName = \"card__save-button\";\n    }\n    return btnClassName;\n  }\n\n  function handleSaveBtnClick() {\n    if (!savedMovie) {\n      onSaveMovie(card);\n      console.log(card);\n    } else {\n      onDeleteMovie(savedMovie._id);\n    }\n  }\n\n  function handleDeleteClick() {\n    onDeleteMovie(card._id);\n    console.log(\"clicked\");\n  }\n\n  return (\n    <li className=\"card\">\n      <a\n        className=\"card__link\"\n        href={card.trailerLink}\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        <img\n          src={card.image.url ? `${IMG_BASE_URL}${card.image.url}` : card.image}\n          alt={card.image.name}\n          className=\"card__image\"\n        />\n      </a>\n      <button\n        className={handleButtonChange()}\n        type=\"button\"\n        onClick={\n          path === \"/saved-movies\" ? handleDeleteClick : handleSaveBtnClick\n        }\n      >\n        {savedMovie || path === \"/saved-movies\" ? \"\" : \"Сохранить\"}\n      </button>\n\n      <div className=\"card__info\">\n        <h2 className=\"card__title\">{card.nameRU}</h2>\n        <p className=\"card__duration\">{getTimeFromMins(card.duration)}</p>\n      </div>\n    </li>\n  );\n}\n","export default function getTimeFromMins(mins) {\n  let hours = Math.trunc(mins / 60);\n  let minutes = mins % 60;\n  return hours + \"ч \" + minutes + \"м\";\n}\n","import React from \"react\";\nimport MovieNotFound from \"../MovieNotFound/MovieNotFound\";\nimport MoviesCard from \"../MoviesCard/MoviesCard\";\n\nexport default function MoviesCardList({\n  cardList,\n  onSaveMovie,\n  isSavedMovie,\n  onDeleteMovie,\n  setMaxNumberOfMovies,\n  maxNumberOfMovies,\n  step,\n  isLoading,\n  notFound,\n  allMovies,\n}) {\n  function handleMoreBtnClick() {\n    return setMaxNumberOfMovies(maxNumberOfMovies + step);\n  }\n\n  const moviesToRender = cardList.slice(0, maxNumberOfMovies);\n\n  return (\n    <section className=\"moviesCardList\">\n      {notFound && !isLoading && <MovieNotFound />}\n      <ul className=\"moviesCardList__gallery\">\n        {moviesToRender.map((card) => (\n          <MoviesCard\n            key={card.id || card._id}\n            card={card}\n            onSaveMovie={onSaveMovie}\n            isSavedMovie={isSavedMovie}\n            onDeleteMovie={onDeleteMovie}\n          />\n        ))}\n      </ul>\n      {allMovies && cardList.length > maxNumberOfMovies && (\n        <button\n          className=\"moviesCardList__more-button\"\n          onClick={handleMoreBtnClick}\n        >\n          Еще\n        </button>\n      )}\n    </section>\n  );\n}\n","import React from \"react\";\nimport \"./Preloader.css\";\n\nconst Preloader = () => {\n  return (\n    <div className=\"preloader\">\n      <div className=\"preloader__container\">\n        <span className=\"preloader__round\"></span>\n      </div>\n    </div>\n  );\n};\n\nexport default Preloader;\n","import React from \"react\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport Header from \"../Header/Header\";\nimport Footer from \"../Footer/Footer\";\nimport Preloader from \"../Preloader/Preloader\";\nimport PropTypes from \"prop-types\";\n\nexport default function Movies({\n  handleBurgerClick,\n  cards,\n  handleMovieSearch,\n  loggedIn,\n  onSaveMovie,\n  isLoading,\n  isSavedMovie,\n  isCheckedForShortFilms,\n  handleCheck,\n  setMaxNumberOfMovies,\n  maxNumberOfMovies,\n  setStep,\n  step,\n  savedMovies,\n  foundMovies,\n  notFound,\n  onDeleteMovie,\n  customErr,\n  fetchErrMsg,\n}) {\n  return (\n    <>\n      <Header handleBurgerClick={handleBurgerClick} loggedIn={loggedIn} />\n      <section className=\"movies\">\n        <SearchForm\n          handleMovieSearch={handleMovieSearch}\n          handleCheck={handleCheck}\n          isShortFilms={isCheckedForShortFilms}\n          localArr={localStorage.movies}\n        />\n        <p className=\"movies__error\">{fetchErrMsg || \"\"}</p>\n        {isLoading && <Preloader />}\n        <MoviesCardList\n          cardList={cards}\n          onSaveMovie={onSaveMovie}\n          isSavedMovie={isSavedMovie}\n          setMaxNumberOfMovies={setMaxNumberOfMovies}\n          maxNumberOfMovies={maxNumberOfMovies}\n          setStep={setStep}\n          step={step}\n          savedMovies={savedMovies}\n          foundMovies={foundMovies}\n          isLoading={isLoading}\n          notFound={notFound}\n          onDeleteMovie={onDeleteMovie}\n          customErr={customErr}\n          allMovies={true}\n        />\n      </section>\n      <Footer />\n    </>\n  );\n}\n\nMovies.propTypes = {\n  handleBurgerClick: PropTypes.func,\n};\n","import React from \"react\";\nimport Header from \"../Header/Header\";\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport Footer from \"../Footer/Footer\";\nimport Preloader from \"../Preloader/Preloader\";\nimport PropTypes from \"prop-types\";\n\nexport default function SavedMovies({\n  isLoading,\n  handleBurgerClick,\n  savedMovies,\n  loggedIn,\n  isSavedMovie,\n  onDeleteMovie,\n  handleMovieSearch,\n  isCheckedForSavedShortFilms,\n  handleCheck,\n  foundSavedMovies,\n  setMaxNumberOfMovies,\n  maxNumberOfMovies,\n  setStep,\n  step,\n  notFound,\n  fetchErrMsg,\n}) {\n  return (\n    <>\n      <Header handleBurgerClick={handleBurgerClick} loggedIn={loggedIn} />\n      <section className=\"saved-movies\">\n        <SearchForm\n          handleMovieSearch={handleMovieSearch}\n          handleCheck={handleCheck}\n          isShortFilms={isCheckedForSavedShortFilms}\n          savedMov={true}\n          localArr={localStorage.savedMovies}\n        />\n        <p className=\"movies__error\">{fetchErrMsg || \"\"}</p>\n        {isLoading && <Preloader />}\n        <MoviesCardList\n          cardList={foundSavedMovies}\n          savedMovies={savedMovies}\n          isSavedMovie={isSavedMovie}\n          onDeleteMovie={onDeleteMovie}\n          setMaxNumberOfMovies={setMaxNumberOfMovies}\n          maxNumberOfMovies={maxNumberOfMovies}\n          setStep={setStep}\n          step={step}\n          notFound={notFound}\n        />\n      </section>\n      <Footer />\n    </>\n  );\n}\n\nSavedMovies.propTypes = {\n  handleBurgerClick: PropTypes.func,\n};\n","import React from \"react\";\n\nexport default function FormButton({ btnName, isValid, isError }) {\n  return (\n    <>\n      <button\n        type=\"submit\"\n        value=\"Отправить\"\n        className={`submit-btn ${\n          (!isValid || isError) && \"submit-btn_disabled\"\n        }`}\n        disabled={!isValid || isError}\n      >\n        {btnName}\n      </button>\n    </>\n  );\n}\n","import React from \"react\";\nimport handleServerError from \"../../utils/handleServerError\";\n\nexport default function FormError({ serverErrMsg, customErr }) {\n  const error = handleServerError(serverErrMsg);\n  return <span className=\"error\">{error == 1 ? customErr : error}</span>;\n}\n","export default function handleServerError(status) {\n\n  if (status == \"Error: 409\") {\n    return \"Пользователь с таким email уже существует.\";\n  } else if (status === \"Error: 401\") {\n    return \"Вы ввели неправильный логин или пароль.\";\n  } else if (status === \"Error: 500\") {\n    return \"На сервере произошла ошибка.\";\n  }\n  return 1;\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport FormButton from \"../FormButton/FormButton\";\nimport FormError from \"../FormError/FormError\";\n\nexport default function AuthForm({\n  title,\n  signUp,\n  btnName,\n  authQuestion,\n  authLinkTxt,\n  linkPath,\n  onChangeInput,\n  errors,\n  values,\n  isValid,\n  onSubmit,\n  serverErrMsg,\n  customErr,\n  resetServerError\n}) {\n\n  function hideError() {\n    resetServerError()\n  }\n  return (\n    <section className=\"auth\">\n      <Link to=\"/\">\n        <div className=\"auth__logo\"></div>\n      </Link>\n      <h1 className=\"auth__title\">{`${title}`}</h1>\n      <form onSubmit={onSubmit} className=\"auth__form\" noValidate>\n        <fieldset className=\"auth__fieldset\">\n          {signUp && (\n            <label className=\"auth__label\">\n              <p className=\"auth__input-name\">Имя</p>\n              <input\n                className=\"auth__input\"\n                minLength={2}\n                maxLength={30}\n                type=\"text\"\n                name=\"name\"\n                onChange={onChangeInput}\n                onFocus={hideError}\n                required\n              />\n              <span className=\"auth__input-error\" id=\"name-error\">\n                {errors.name || \"\"}\n              </span>\n            </label>\n          )}\n          <label className=\"auth__label\">\n            <p className=\"auth__input-name\">E-mail</p>\n            <input\n              className=\"auth__input\"\n              type=\"email\"\n              name=\"email\"\n              required\n              onChange={onChangeInput}\n              onFocus={hideError}\n            />\n            <span className=\"auth__input-error\" id=\"email-error\">\n              {errors.email || \"\"}\n            </span>\n          </label>\n          <label className=\"auth__label\">\n            <p className=\"auth__input-name\">Пароль</p>\n            <input\n              className={\n                !errors.password ? \"auth__input\" : \"auth__input auth__input_invalid\"\n              }\n              minLength={8}\n              type=\"password\"\n              name=\"password\"\n              onChange={onChangeInput}\n              required\n              onFocus={hideError}\n            />\n            <span className=\"auth__input-error\" id=\"password-error\">\n              {errors.password || \"\"}\n            </span>\n          </label>\n        </fieldset>\n        <FormError serverErrMsg={serverErrMsg} customErr={customErr} />\n        <FormButton btnName={btnName} isValid={isValid} values={values} />\n      </form>\n      <p className=\"auth__signed-up\">\n        {authQuestion}\n        <Link to={linkPath} className=\"auth__link\">\n          {authLinkTxt}\n        </Link>\n      </p>\n    </section>\n  );\n}\n","/* eslint-disable react/prop-types */\nimport React from \"react\";\nimport { useFormWithValidation } from \"../../hooks/useForm\";\nimport AuthForm from \"../AuthForm/AuthForm\";\n\nexport default function Login({\n  onSubmit,\n  isLoading,\n  serverErrMsg,\n  customErr,\n  resetServerError\n}) {\n  const { values, handleChange, errors, isValid } = useFormWithValidation();\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    onSubmit(values);\n  };\n\n  return (\n    <AuthForm\n      title=\"Рады видеть!\"\n      signUp={false}\n      btnName=\"Войти\"\n      authQuestion=\"Ещё не зарегистрированы?\"\n      authLinkTxt=\"Регистрация\"\n      linkPath=\"/signup\"\n      onChangeInput={handleChange}\n      onSubmit={handleSubmit}\n      errors={errors}\n      isValid={isValid}\n      isLoading={isLoading}\n      values={values}\n      serverErrMsg={serverErrMsg}\n      customErr={customErr}\n      resetServerError={resetServerError}\n    />\n  );\n}\n","import React from \"react\";\nimport AuthForm from \"../AuthForm/AuthForm\";\nimport { useFormWithValidation } from \"../../hooks/useForm\";\nimport Preloader from \"../Preloader/Preloader\";\n\nexport default function Register({\n  onSubmit,\n  isLoading,\n  serverErrMsg,\n  customErr,\n  resetServerError,\n}) {\n  const { values, handleChange, errors, isValid } = useFormWithValidation();\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    onSubmit(values);\n  };\n\n  return (\n    <>\n      {isLoading ? (\n        <Preloader />\n      ) : (\n        <AuthForm\n          title=\"Добро пожаловать!\"\n          signUp={true}\n          btnName=\"Зарегистрироваться\"\n          authQuestion=\"Уже зарегистрированы?\"\n          authLinkTxt=\"Войти\"\n          linkPath=\"/signin\"\n          onChangeInput={handleChange}\n          onSubmit={handleSubmit}\n          errors={errors}\n          isValid={isValid}\n          isLoading={isLoading}\n          serverErrMsg={serverErrMsg}\n          customErr={customErr}\n          resetServerError={resetServerError}\n        />\n      )}\n    </>\n  );\n}\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function NotFound() {\n  const history = useHistory();\n  const back = () => history.goBack();\n\n  return (\n    <section className=\"not-found\">\n      <h1 className=\"not-found__title\">404</h1>\n      <p className=\"not-found__subtitle\">Страница не найдена</p>\n      <button type=\"button\" onClick={back} className=\"not-found__button\">\n        Назад\n      </button>\n    </section>\n  );\n}\n","import React from \"react\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\nimport { useFormWithValidation } from \"../../hooks/useForm\";\nimport Header from \"../Header/Header\";\nimport Preloader from \"../Preloader/Preloader\";\nimport FormButton from \"../FormButton/FormButton\";\nimport FormError from \"../FormError/FormError\";\n\nexport default function Profile({\n  handleBurgerClick,\n  handleLogOut,\n  handleUpdateUser,\n  isLoading,\n  loggedIn,\n  customErr,\n  serverErrMsg,\n  isError,\n  resetServerError,\n  successMsg,\n}) {\n  const [isInputDisabled, setIsInputDisabled] = React.useState(true);\n  const { name, email } = React.useContext(CurrentUserContext);\n  const {\n    values,\n    handleChange,\n    errors,\n    isValid,\n    setValues,\n  } = useFormWithValidation();\n\n  React.useEffect(() => {\n    setValues({\n      name,\n      email,\n    });\n  }, [name, email]);\n\n  React.useEffect(() => {\n    resetServerError();\n  }, []);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    handleUpdateUser(values);\n    setIsInputDisabled(true);\n  }\n\n  function toggleInput() {\n    setIsInputDisabled(!isInputDisabled);\n  }\n\n  return (\n    <>\n      {isLoading ? (\n        <Preloader />\n      ) : (\n        <>\n          <Header handleBurgerClick={handleBurgerClick} loggedIn={loggedIn} />\n          <section className=\"profile\">\n            <h1 className=\"profile__title\">{`Привет, ${name}!`}</h1>\n            <p className=\"profile__success\">{successMsg || \"\"}</p>\n            <form\n              className=\"profile__form\"\n              name=\"profile\"\n              onSubmit={handleSubmit}\n              noValidate\n            >\n              {isLoading ? (\n                <Preloader />\n              ) : (\n                <>\n                  <div className=\"profile__inputs\">\n                    <label className=\"profile__label\">\n                      <span className=\"profile__input-title\">Имя</span>\n                      <input\n                        type=\"text\"\n                        name=\"name\"\n                        id=\"name-input\"\n                        className=\"profile__input\"\n                        minLength={2}\n                        maxLength={30}\n                        required\n                        value={values.name || \"\"}\n                        onChange={handleChange}\n                        disabled={isInputDisabled}\n                      />\n                    </label>\n                    <span className=\"profile__input-error\">\n                      {errors.name || \"\"}\n                    </span>\n                    <label className=\"profile__label\">\n                      <span className=\"profile__input-title\">E-mail</span>\n                      <input\n                        type=\"email\"\n                        name=\"email\"\n                        className=\"profile__input\"\n                        id=\"email-input\"\n                        required\n                        disabled={isInputDisabled}\n                        value={values.email || \"\"}\n                        onChange={handleChange}\n                      />\n                    </label>\n                    <span className=\"profile__input-error\">\n                      {errors.email || \"\"}\n                    </span>\n                  </div>\n\n                  {values.name === name && values.email === email ? (\n                    <div className=\"profile__edit-group\">\n                      <button\n                        type=\"button\"\n                        value=\"Edit\"\n                        className={`profile__submit-btn ${\n                          isInputDisabled ? \"\" : \"profile__submit-btn_clicked\"\n                        }`}\n                        onClick={toggleInput}\n                      >\n                        Редактировать\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"profile__signout-btn\"\n                        value=\"Signout\"\n                        onClick={handleLogOut}\n                      >\n                        Выйти из аккаунта\n                      </button>\n                    </div>\n                  ) : (\n                    <>\n                      <FormError\n                        serverErrMsg={serverErrMsg}\n                        customErr={customErr}\n                      />\n                      <FormButton\n                        btnName=\"Сохранить\"\n                        isError={isError}\n                        isValid={isValid}\n                      />\n                    </>\n                  )}\n                </>\n              )}\n            </form>\n          </section>\n        </>\n      )}\n    </>\n  );\n}\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport AccountButton from \"../AccountButton/AccountButton\";\n\nexport default function Sidebar({ isOpen, onClose }) {\n  const handleOverlayClose = (event) => {\n    if (event.target === event.currentTarget && isOpen) {\n      onClose();\n    }\n  };\n\n  return (\n    <div\n      className={`sidebar__overlay ${isOpen ? \"sidebar__overlay_opened\" : \"\"}`}\n      onMouseDown={handleOverlayClose}\n    >\n      <div className=\"sidebar\">\n        <button\n          type=\"button\"\n          className=\"sidebar___close-btn\"\n          onClick={onClose}\n        ></button>\n        <nav className=\"sidebar__menu\">\n          <ul className=\"sidebar__menu-list\">\n            <li className=\"sidebar__menu-item\">\n              <NavLink\n                to={`/`}\n                className=\"sidebar__menu-link\"\n                onClick={onClose}\n              >\n                Главная\n              </NavLink>\n            </li>\n            <li className=\"sidebar__menu-item\">\n              <NavLink\n                to={`/movies`}\n                className=\"sidebar__menu-link\"\n                activeClassName=\"sidebar__menu-link_active\"\n                onClick={onClose}\n              >\n                Фильмы\n              </NavLink>\n            </li>\n            <li className=\"sidebar__menu-item\">\n              <NavLink\n                to={`/saved-movies`}\n                className=\"sidebar__menu-link\"\n                activeClassName=\"sidebar__menu-link_active\"\n                onClick={onClose}\n              >\n                Сохранённые фильмы\n              </NavLink>\n            </li>\n          </ul>\n          <div onClick={onClose}>\n            <AccountButton />\n          </div>\n        </nav>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  const jwt = localStorage.getItem(\"token\");\n  return (\n    <Route>\n      {() => (jwt ? <Component {...props} /> : <Redirect to=\"/\" />)}\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;\n","export default function filterMovies(localMoviesArr, query, shortFilms) {\n  let filteredMovies = [];\n\n  if (localMoviesArr) {\n    filteredMovies = localMoviesArr.filter((movie) => {\n      return movie.nameRU.toUpperCase().includes(query.toUpperCase());\n    });\n  }\n  if (shortFilms) {\n    filteredMovies = filteredMovies.filter((movie) => movie.duration <= 40);\n  }\n  return filteredMovies;\n}\n","function getNumberOfMovies(width) {\n    let maxNumberOfMovies;\n    let step;\n  \n    if (width > 980) {\n        maxNumberOfMovies = 12;\n      step = 3;\n    } else if (width >= 500 && width <= 980) {\n        maxNumberOfMovies = 8;\n      step = 2;\n    } else if (width < 500) {\n        maxNumberOfMovies = 5;\n      step = 2;\n    }\n    return { maxNumberOfMovies, step };\n  }\n  \n  export default getNumberOfMovies;","import React, { useLayoutEffect } from \"react\";\nimport { Route, Switch, useHistory, Redirect } from \"react-router-dom\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\nimport \"./App.css\";\n\nimport moviesApi from \"../../utils/MoviesApi\";\nimport { auth } from \"../../utils/AuthApi\";\nimport api from \"../../utils/MainApi\";\n\nimport Main from \"../Main/Main\";\nimport Movies from \"../Movies/Movies\";\nimport SavedMovies from \"../SavedMovies/SavedMovies\";\nimport Login from \"../Login/Login\";\nimport Register from \"../Register/Register\";\nimport NotFound from \"../NotFound/NotFound\";\nimport Profile from \"../Profile/Profile\";\nimport Sidebar from \"../Sidebar/Sidebar\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\n\nimport filterMovies from \"../../utils/filterMovies\";\nimport getNumberOfMovies from \"../../utils/getNumberOfMovies\";\nimport { SUCCESS_MSG } from \"../../utils/constants\";\nimport { FETCH_MOVIES_ERR } from \"../../utils/constants\";\n\nexport default function App() {\n  const history = useHistory();\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n\n  const [isSidebarOpen, setIsSidebarOpen] = React.useState(false);\n\n  const [foundMovies, setFoundMovies] = React.useState([]);\n  const [foundSavedMovies, setFoundSavedMovies] = React.useState([]);\n  const [savedMovies, setSavedMovies] = React.useState([]);\n\n  const [width, setWidth] = React.useState(window.innerWidth);\n  const [isResizing, setIsResizing] = React.useState(false);\n  const [maxNumberOfMovies, setMaxNumberOfMovies] = React.useState(0);\n  const [step, setStep] = React.useState(0);\n\n  const [isCheckedForShortFilms, setIsCheckedForShortFilms] = React.useState(\n    false\n  );\n  const [\n    isCheckedForSavedShortFilms,\n    setIsCheckedForSavedShortFilms,\n  ] = React.useState(false);\n\n  const [customErr, setCustomErr] = React.useState(\"\");\n  const [serverErrMsg, setServerErrMsg] = React.useState(\"\");\n  const [isError, setIsError] = React.useState(false);\n\n  const [isNotFound, setIsNotFound] = React.useState(false);\n  const [isNotFoundSaved, setIsNotFoundSaved] = React.useState(false);\n\n  const [successMsg, setSuccessMsg] = React.useState(\"\");\n  const [fetchErrMsg, setFetchErrMsg] = React.useState(\"\");\n\n  function handleBurgerClick() {\n    setIsSidebarOpen(true);\n  }\n\n  function closeSidebar() {\n    setIsSidebarOpen(false);\n  }\n\n  function handleServerError(err) {\n    setServerErrMsg(err);\n  }\n\n  function resetServerError() {\n    setServerErrMsg(\"\");\n    setCustomErr(\"\");\n  }\n\n  function getUserData() {\n    api\n      .getUserData()\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .catch((err) => {\n        console.log(`${err}`);\n      });\n  }\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      api\n        .getSavedMovies()\n        .then((savedMovies) => {\n          setSavedMovies(savedMovies);\n          setFoundSavedMovies(savedMovies);\n          localStorage.setItem(\"savedMovies\", JSON.stringify(savedMovies));\n        })\n        .catch((err) => {\n          setFetchErrMsg(FETCH_MOVIES_ERR);\n          console.log(`${err}`);\n        });\n    }\n  }, [loggedIn]);\n\n  React.useEffect(() => {\n    setIsLoading(true);\n    if (loggedIn) {\n      api\n        .getUserData()\n        .then((res) => {\n          setCurrentUser(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n        .finally(() => setIsLoading(false));\n    } else {\n      setIsLoading(false);\n    }\n  }, [loggedIn]);\n\n  React.useEffect(() => {\n    function checkToken() {\n      const jwt = localStorage.getItem(\"token\");\n      if (jwt) {\n        auth\n          .getContent(jwt)\n          .then((res) => {\n            if (res) {\n              setLoggedIn(true);\n            }\n          })\n          .catch((err) => console.log(err));\n      }\n    }\n    checkToken();\n  }, []);\n\n  function handleRegister({ name, email, password }) {\n    setIsLoading(true);\n    auth\n      .register(name, email, password)\n      .then(() => {\n        handleLogin({ email, password });\n        resetServerError();\n      })\n      .catch((err) => {\n        handleServerError(err);\n        setCustomErr(\"При регистрации пользователя произошла ошибка.\");\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  function handleLogin({ email, password }) {\n    setIsLoading(true);\n    auth\n      .signIn({ email, password })\n      .then(() => {\n        getUserData();\n        setLoggedIn(true);\n        resetServerError();\n        history.push(\"/movies\");\n      })\n      .catch((err) => {\n        handleServerError(err);\n        setCustomErr(\"При авторизации произошла ошибка.\");\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  function handleUpdateUser({ name, email }) {\n    setIsLoading(true);\n    api\n      .uploadUserInfo({ name, email })\n      .then((user) => {\n        resetServerError();\n        setSuccessMsg(SUCCESS_MSG);\n        setCurrentUser(user);\n      })\n      .catch((err) => {\n        handleServerError(err);\n        setCustomErr(\"При обновлении профиля произошла ошибка.\");\n        setIsError(true);\n      })\n      .finally(() => setIsLoading(false));\n  }\n\n  function handleLogOut() {\n    setFoundMovies([]);\n    setFoundSavedMovies([]);\n    setLoggedIn(false);\n    localStorage.clear();\n    history.push(\"/\");\n  }\n\n  function handleMovieSearch(query, localArr) {\n    if (localArr === localStorage.movies) {\n      const filteredMovies = filterMovies(\n        JSON.parse(localArr),\n        query,\n        isCheckedForShortFilms\n      );\n      handleNoFoundMovies(filteredMovies);\n      setFoundMovies(filteredMovies);\n    } else {\n      const filteredMovies = filterMovies(\n        JSON.parse(localArr),\n        query,\n        isCheckedForSavedShortFilms\n      );\n      handleNoFoundSavedMovies(filteredMovies);\n      setFoundSavedMovies(filteredMovies);\n    }\n  }\n\n  function handleNoFoundMovies(filteredMovies) {\n    if (filteredMovies.length == 0) {\n      setIsNotFound(true);\n    } else {\n      setIsNotFound(false);\n    }\n  }\n\n  function handleNoFoundSavedMovies(filteredMovies) {\n    if (filteredMovies.length == 0) {\n      setIsNotFoundSaved(true);\n    } else {\n      setIsNotFoundSaved(false);\n    }\n  }\n\n  React.useEffect(() => {\n    if (localStorage.movies && localStorage.queryM) {\n      const filteredMovies = filterMovies(\n        JSON.parse(localStorage.movies),\n        localStorage.queryM,\n        isCheckedForShortFilms\n      );\n      handleNoFoundMovies(filteredMovies);\n      setFoundMovies(filteredMovies);\n    }\n    return;\n  }, [isCheckedForShortFilms]);\n\n  React.useEffect(() => {\n    if (localStorage.savedMovies && localStorage.querySM) {\n      const filteredMovies = filterMovies(\n        JSON.parse(localStorage.savedMovies),\n        localStorage.querySM,\n        isCheckedForSavedShortFilms\n      );\n      handleNoFoundSavedMovies(filteredMovies);\n      setFoundSavedMovies(filteredMovies);\n    }\n    return;\n  }, [isCheckedForSavedShortFilms]);\n\n  React.useEffect(() => {\n    if (localStorage.savedMovies) {\n      if (isCheckedForSavedShortFilms == true) {\n        const filteredMovies = JSON.parse(localStorage.savedMovies).filter(\n          (movie) => movie.duration <= 40\n        );\n        setFoundSavedMovies(filteredMovies);\n      } else {\n        setFoundSavedMovies(savedMovies);\n      }\n    }\n    return;\n  }, [isCheckedForSavedShortFilms]);\n\n  React.useEffect(() => {\n    setIsLoading(true);\n    if (!localStorage.movies) {\n      moviesApi\n        .getMovies()\n        .then((res) => {\n          const movies = res.map((movie) => {\n            return {\n              ...movie,\n              movieId: movie.id,\n            };\n          });\n          localStorage.setItem(\"movies\", JSON.stringify(movies));\n        })\n        .catch((err) => {\n          setFetchErrMsg(FETCH_MOVIES_ERR);\n          console.log(`${err}`);\n        })\n        .finally(() => setIsLoading(false));\n    }\n  }, [loggedIn]);\n\n  function getSavedMovies() {\n    setIsLoading(true);\n    api\n      .getSavedMovies()\n      .then((savedMovies) => {\n        setSavedMovies(savedMovies);\n        localStorage.setItem(\"savedMovies\", JSON.stringify(savedMovies));\n      })\n      .catch((err) => {\n        setFetchErrMsg(FETCH_MOVIES_ERR);\n        console.log(`${err}`);\n      })\n      .finally(() => setIsLoading(false));\n  }\n\n  function handleSaveMovie(movie) {\n    api\n      .saveMovieCard(movie)\n      .then((savedCard) => {\n        getSavedMovies();\n        setFoundSavedMovies([...foundSavedMovies, savedCard]);\n      })\n      .catch((err) => console.log(`Добавление карточки: ${err}`))\n      .finally(() => console.log(\"Уф, сохранили!\"));\n  }\n\n  function isSavedMovie(card) {\n    const savedMovie = savedMovies.find((item) => item.movieId === card.id);\n    return savedMovie;\n  }\n\n  function handleRemoveSavedMovie(movieId) {\n    api\n      .deleteMovie(movieId)\n      .then((deletedMovie) => {\n        const newSavedMovies = foundSavedMovies.filter(\n          (movie) => movie._id !== deletedMovie.data._id\n        );\n        setFoundSavedMovies(newSavedMovies);\n        getSavedMovies();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleCheckMovies() {\n    setIsCheckedForShortFilms(!isCheckedForShortFilms);\n  }\n\n  function handleCheckSavedMovies() {\n    setIsCheckedForSavedShortFilms(!isCheckedForSavedShortFilms);\n  }\n\n  useLayoutEffect(() => {\n    function updateWidth() {\n      if (!isResizing) {\n        setIsResizing(true);\n        setTimeout(() => {\n          setWidth(window.innerWidth);\n          setIsResizing(false);\n        }, 700);\n      }\n    }\n    window.addEventListener(\"resize\", updateWidth);\n    updateWidth();\n    return () => window.removeEventListener(\"resize\", updateWidth);\n  }, []);\n\n  React.useEffect(() => {\n    const { maxNumberOfMovies, step } = getNumberOfMovies(width);\n    setMaxNumberOfMovies(maxNumberOfMovies);\n    setStep(step);\n  }, [width]);\n\n  React.useEffect(() => {\n    setTimeout(() => {\n      setSuccessMsg(\"\");\n    }, 2000);\n  }, [successMsg]);\n\n  React.useEffect(() => {\n    setTimeout(() => {\n      setSuccessMsg(\"\");\n    }, 2000);\n  }, [fetchErrMsg]);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Switch>\n          <Route path=\"/\" exact>\n            <Main loggedIn={loggedIn} handleBurgerClick={handleBurgerClick} />\n          </Route>\n\n          <ProtectedRoute\n            path=\"/movies\"\n            component={Movies}\n            handleMovieSearch={handleMovieSearch}\n            handleBurgerClick={handleBurgerClick}\n            cards={foundMovies}\n            loggedIn={loggedIn}\n            isLoading={isLoading}\n            onSaveMovie={handleSaveMovie}\n            isSavedMovie={isSavedMovie}\n            isCheckedForShortFilms={isCheckedForShortFilms}\n            handleCheck={handleCheckMovies}\n            setMaxNumberOfMovies={setMaxNumberOfMovies}\n            maxNumberOfMovies={maxNumberOfMovies}\n            setStep={setStep}\n            step={step}\n            savedMovies={savedMovies}\n            notFound={isNotFound}\n            onDeleteMovie={handleRemoveSavedMovie}\n            fetchErrMsg={fetchErrMsg}\n          />\n\n          <ProtectedRoute\n            path=\"/saved-movies\"\n            component={SavedMovies}\n            handleMovieSearch={handleMovieSearch}\n            handleBurgerClick={handleBurgerClick}\n            foundSavedMovies={foundSavedMovies}\n            savedMovies={savedMovies}\n            loggedIn={loggedIn}\n            isLoading={isLoading}\n            onDeleteMovie={handleRemoveSavedMovie}\n            isCheckedForSavedShortFilms={isCheckedForSavedShortFilms}\n            handleCheck={handleCheckSavedMovies}\n            isSavedMovie={isSavedMovie}\n            notFound={isNotFoundSaved}\n            fetchErrMsg={fetchErrMsg}\n          />\n\n          <ProtectedRoute\n            path=\"/profile\"\n            component={Profile}\n            loggedIn={loggedIn}\n            handleBurgerClick={handleBurgerClick}\n            handleLogOut={handleLogOut}\n            handleUpdateUser={handleUpdateUser}\n            isLoading={isLoading}\n            serverErrMsg={serverErrMsg}\n            customErr={customErr}\n            isError={isError}\n            resetServerError={resetServerError}\n            successMsg={successMsg}\n          />\n\n          <Route path=\"/signup\">\n            {loggedIn ? (\n              <Redirect to=\"/movies\" />\n            ) : (\n              <Register\n                isLoading={isLoading}\n                onSubmit={handleRegister}\n                serverErrMsg={serverErrMsg}\n                customErr={customErr}\n                isError={isError}\n                resetServerError={resetServerError}\n              />\n            )}\n          </Route>\n\n          <Route path=\"/signin\">\n            {loggedIn ? (\n              <Redirect to=\"/movies\" />\n            ) : (\n              <Login\n                isLoading={isLoading}\n                onSubmit={handleLogin}\n                serverErrMsg={serverErrMsg}\n                customErr={customErr}\n                isError={isError}\n                resetServerError={resetServerError}\n              />\n            )}\n          </Route>\n\n          <Route path=\"*\">\n            <NotFound />\n          </Route>\n        </Switch>\n        <Sidebar isOpen={isSidebarOpen} onClose={closeSidebar} />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter> \n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n); \n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}