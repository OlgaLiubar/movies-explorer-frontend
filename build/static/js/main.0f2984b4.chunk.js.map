{"version":3,"sources":["contexts/CurrentUserContext.js","utils/MoviesApi.js","utils/AuthApi.js","utils/constants.js","utils/MainApi.js","components/Footer/Footer.js","images/headerLogo.svg","components/NavLanding/NavLanding.js","components/AccountButton/AccountButton.js","components/NavMovies/NavMovies.js","components/Header/Header.js","images/studentPhoto.jpg","components/AboutMe/AboutMe.js","components/AboutProject/AboutProject.js","components/Portfolio/Portfolio.js","components/Promo/Promo.js","components/Techs/Techs.js","components/Main/Main.js","components/FilterCheckbox/FilterCheckbox.js","hooks/useForm.js","components/SearchForm/SearchForm.js","components/MovieNotFound/MovieNotFound.js","components/MoviesCard/MoviesCard.js","utils/getTimeFromMins.js","components/MoviesCardList/MoviesCardList.js","components/Preloader/Preloader.js","components/Movies/Movies.js","components/SavedMovies/SavedMovies.js","components/FormButton/FormButton.js","components/FormError/FormError.js","utils/handleServerError.js","components/AuthForm/AuthForm.js","components/Login/Login.js","components/Register/Register.js","components/NotFound/NotFound.js","components/Profile/Profile.js","components/Sidebar/Sidebar.js","components/ProtectedRoute/ProtectedRoute.js","utils/filterMovies.js","utils/getNumberOfMovies.js","components/App/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","moviesApi","options","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","_checkResponse","Accept","auth","_baseUrl","console","log","name","email","password","credentials","body","JSON","stringify","REGEX","FETCH_MOVIES_ERR","IMG_BASE_URL","api","movie","country","director","duration","year","description","image","trailer","trailerLink","match","thumbnail","formats","movieId","id","nameRU","nameEN","data","Footer","className","href","rel","target","NavLanding","to","AccountButton","NavMovies","handleBurgerClick","path","useLocation","pathname","activeClassName","onClick","Header","headerDark","loggedIn","src","headerLogo","alt","AboutMe","studentPhoto","AboutProject","Portfolio","Promo","Techs","Main","FilterCheckbox","handleCheck","isShortFilms","checkboxActive","htmlFor","type","onChange","checked","useFormWithValidation","useState","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","evt","input","value","validationMessage","closest","checkValidity","SearchForm","handleMovieSearch","localArr","savedMov","isError","setIsError","errorSelector","noValidate","onSubmit","preventDefault","localStorage","setItem","placeholder","MovieNotFound","MoviesCard","mins","card","onSaveMovie","onDeleteMovie","isSavedMovie","savedMovie","_id","Math","trunc","MoviesCardList","cardList","setMaxNumberOfMovies","maxNumberOfMovies","step","isLoading","notFound","allMovies","moviesToRender","slice","map","length","Preloader","Movies","cards","isCheckedForShortFilms","setStep","savedMovies","foundMovies","customErr","fetchErrMsg","movies","SavedMovies","isCheckedForSavedShortFilms","foundSavedMovies","FormButton","btnName","disabled","FormError","serverErrMsg","error","AuthForm","title","signUp","authQuestion","authLinkTxt","linkPath","onChangeInput","resetServerError","hideError","minLength","maxLength","onFocus","required","Login","Register","NotFound","history","useHistory","goBack","Profile","handleLogOut","handleUpdateUser","successMsg","isInputDisabled","setIsInputDisabled","useContext","useEffect","Sidebar","isOpen","onClose","onMouseDown","event","currentTarget","ProtectedRoute","Component","component","props","filterMovies","localMoviesArr","query","shortFilms","filteredMovies","filter","toUpperCase","includes","getNumberOfMovies","width","App","currentUser","setCurrentUser","setIsLoading","setLoggedIn","isSidebarOpen","setIsSidebarOpen","setFoundMovies","setFoundSavedMovies","setSavedMovies","window","innerWidth","setWidth","isResizing","setIsResizing","setIsCheckedForShortFilms","setIsCheckedForSavedShortFilms","setCustomErr","setServerErrMsg","isNotFound","setIsNotFound","isNotFoundSaved","setIsNotFoundSaved","setSuccessMsg","setFetchErrMsg","handleServerError","err","handleLogin","signIn","getUserData","catch","push","finally","parse","handleNoFoundMovies","handleNoFoundSavedMovies","getSavedMovies","mySavedMovies","owner","find","item","handleRemoveSavedMovie","deleteMovie","deletedMovie","newSavedMovies","getContent","queryM","querySM","getMovies","useLayoutEffect","updateWidth","setTimeout","addEventListener","removeEventListener","Provider","exact","saveMovieCard","savedCard","signOut","clear","uploadUserInfo","user","register","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0f2984b4.chunk.js","sourcesContent":["import React from \"react\";\nexport const CurrentUserContext = React.createContext();","class Api {\n  constructor(options) {\n    this._url = options.url;\n    this._headers = options.headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  getMovies() {\n    return fetch(`${this._url}`, {\n      method: \"GET\",\n      // credentials: 'include',\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n}\n\nconst moviesApi = new Api({\n  url: \"https://api.nomoreparties.co/beatfilm-movies\",\n  headers: {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default moviesApi;\n","class Auth {\n  constructor() {\n    this._baseUrl = \"https://api-beatfilm-movies.xyz\";\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    console.log(res.json());\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  register(name, email, password) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        name: name,\n        email: email,\n        password: password,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  signIn({ email, password }) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        password: password,\n        email: email,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  getContent() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    }).then(this._checkResponse);\n  }\n\n  signOut() {\n    return fetch(`${this._baseUrl}/signout`, {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    }).then(this._checkResponse);\n  }\n}\n\nexport const auth = new Auth();\n","export const SUCCESS_MSG = \"Данные успешно сохранены!\";\nexport const REGEX = /http(s)?:\\/\\/w{0,3}?[a-zA-Z0-9]+[a-zA-Z0-9\\-._~:/?#[\\]@!$&'()*+,;=]*/;\nexport const TRAILER = \"https://www.youtube.com/watch?v=uA4k5Vc5jFc\";\nexport const FETCH_MOVIES_ERR =\n  \"Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз\";\nexport const IMG_BASE_URL = \"https://api.nomoreparties.co\";\n\n","import { IMG_BASE_URL, TRAILER, REGEX } from \"../utils/constants\";\n\nclass Api {\n  constructor(options) {\n    this._url = options.url;\n    this._headers = options.headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(res);\n  }\n\n  getSavedMovies() {\n    return fetch(`${this._url}/movies`, {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  getUserData() {\n    return fetch(`${this._url}/users/me`, {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  saveMovieCard(movie) {\n    return fetch(`${this._url}/movies`, {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: this._headers,\n      body: JSON.stringify({\n        country: `${\n          movie.country !== (undefined || \"\" || null)\n            ? movie.country\n            : \"no info\"\n        }`,\n        director: `${\n          movie.director !== (undefined || \"\" || null)\n            ? movie.director\n            : \"no info\"\n        }`,\n        duration: movie.duration,\n        year: movie.year,\n        description: movie.description,\n        image: `${IMG_BASE_URL}${movie.image.url}`,\n        trailer: `${\n          movie.trailerLink === null || \"\" || !movie.trailerLink.match(REGEX)\n            ? TRAILER\n            : movie.trailerLink\n        }`,\n        thumbnail: `${IMG_BASE_URL}${movie.image.formats.thumbnail.url}`,\n        movieId: movie.id,\n        nameRU: `${movie.nameRU === (\"\" || null) ? \"no info\" : movie.nameRU}`,\n        nameEN: `${movie.nameEN === (\"\" || null) ? \"no info\" : movie.nameEN}`,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  deleteMovie(movieId) {\n    return fetch(`${this._url}/movies/${movieId}`, {\n      method: \"DELETE\",\n      credentials: \"include\",\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  uploadUserInfo(data) {\n    return fetch(`${this._url}/users/me`, {\n      method: \"PATCH\",\n      credentials: \"include\",\n      headers: this._headers,\n      body: JSON.stringify(data),\n    }).then(this._checkResponse);\n  }\n}\n\nconst api = new Api({\n  url: \"https://api-beatfilm-movies.xyz\",\n  headers: {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default api;\n","import React from \"react\";\n\nexport default function Footer() {\n  return (\n    <section className=\"footer\">\n      <p className=\"footer__credits\">\n        Учебный проект Яндекс.Практикум х BeatFilm.\n      </p>\n      <div className=\"footer__wrapper\">\n        <p className=\"footer__copy\">&#169; 2021</p>\n\n        <ul className=\"footer__list\">\n          <li className=\"footer__item\">\n            <a\n              className=\"footer__link\"\n              href=\"https://practicum.yandex.ru/\"\n              rel=\"noreferrer\"\n              target=\"_blank\"\n            >\n              Яндекс.Практикум\n            </a>\n          </li>\n          <li className=\"footer__item\">\n            <a\n              className=\"footer__link\"\n              href=\"https://github.com/\"\n              rel=\"noreferrer\"\n              target=\"_blank\"\n            >\n              Github\n            </a>\n          </li>\n          <li className=\"footer__item\">\n            <a\n              className=\"footer__link\"\n              href=\"https://www.facebook.com/\"\n              rel=\"noreferrer\"\n              target=\"_blank\"\n            >\n              Facebook\n            </a>\n          </li>\n        </ul>\n      </div>\n    </section>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/headerLogo.bca2ab18.svg\";","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function NavLanding() {\n  return (\n    <ul className=\"nav-landing\">\n      <li className=\"nav-landing__btn\">\n        <Link to={`/signup`} className=\"nav-landing__register-btn\">\n          Регистрация\n        </Link>\n      </li>\n      <li className=\"nav-landing__btn\">\n        <Link to={`/signin`} className=\"nav-landing__login-btn\">\n          Войти\n        </Link>\n      </li>\n    </ul>\n  );\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function AccountButton() {\n  return (\n    <Link to=\"/profile\" className=\"account-btn\">\n      Аккаунт\n      <span className=\"account-btn__icon\" />\n    </Link>\n  );\n}\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport AccountButton from \"../AccountButton/AccountButton\";\nimport PropTypes from \"prop-types\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function NavMovies({ handleBurgerClick }) {\n  const path = useLocation().pathname;\n\n  return (\n    <section className=\"nav-main \">\n      <nav\n        className={\n          path === \"/\" ? \"nav-main__visible_promo\" : \"nav-main__visible\"\n        }\n      >\n        <ul className=\"nav-main__list\">\n          <li className=\"nav-main__item\">\n            <NavLink\n              to=\"/movies\"\n              className={\n                path === \"/\" ? \"nav-main__link_promo\" : \"nav-main__link\"\n              }\n              activeClassName=\"nav-main__link_active\"\n            >\n              Фильмы\n            </NavLink>\n          </li>\n          <li className=\"nav-main__item\">\n            <NavLink\n              to=\"/saved-movies\"\n              className={\n                path === \"/\" ? \"nav-main__link_promo\" : \"nav-main__link\"\n              }\n              activeClassName=\"nav-main__link_active\"\n            >\n              Сохранённые фильмы\n            </NavLink>\n          </li>\n        </ul>\n        <AccountButton />\n      </nav>\n      <div\n        className={path === \"/\" ? \"nav-main__burger_promo\" : \"nav-main__burger\"}\n        onClick={handleBurgerClick}\n      ></div>\n    </section>\n  );\n}\n\nNavMovies.propTypes = {\n  handleBurgerClick: PropTypes.func,\n};\n","import React from \"react\";\nimport headerLogo from \"../../images/headerLogo.svg\";\nimport NavLanding from \"../NavLanding/NavLanding\";\nimport NavMovies from \"../NavMovies/NavMovies\";\nimport { Link } from 'react-router-dom';\n\nexport default function Header({ headerDark, loggedIn, handleBurgerClick }) {\n  return (\n    <header className={`header ${headerDark || \"\"}`}>\n      <Link to=\"/\">\n      <img src={headerLogo} alt=\"Movie\" className=\"header__logo\" />\n      </Link>\n      {!loggedIn ? (\n        <NavLanding/>\n      ) : (\n        <NavMovies handleBurgerClick={handleBurgerClick} />\n      )}\n    </header>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/studentPhoto.c37f918b.jpg\";","import React from \"react\";\nimport studentPhoto from \"../../images/studentPhoto.jpg\";\n\nfunction AboutMe() {\n  return (\n    <section className=\"about-me\">\n      <h2 className=\"about-me__title\">Студент</h2>\n      <div className=\"about-me__profile\">\n        <div className=\"about-me__text-wrapper\">\n          <h3 className=\"about-me__section-title\">Ольга</h3>\n          <p className=\"about-me__section-subtitle\">\n            Фронтенд-разработчица, 31 год\n          </p>\n          <p className=\"about-me__text\">\n            Родилась и живу в Санкт-Петербурге, закончила магистратуру по\n            аглийской литературе и лингвистике Университета Гранады. Шесть лет\n            проработала переводчиком с испанского на руднике в Гватемале. После\n            окончания курса по веб-разработке планирую найти работу в новой\n            сфере.\n          </p>\n          <ul className=\"about-me__social\">\n            <li className=\"about-me__social-item\">\n              <a\n                className=\"about-me__link\"\n                href=\"https://www.facebook.com/olga.lubar\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                Facebook\n              </a>\n            </li>\n            <li className=\"about-me__social-item\">\n              <a\n                className=\"about-me__link\"\n                href=\"https://github.com/OlgaLiubar\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                Github\n              </a>\n            </li>\n          </ul>\n        </div>\n        <img\n          className=\"about-me__photo\"\n          src={studentPhoto}\n          alt=\"Фотография студента\"\n        />\n      </div>\n    </section>\n  );\n}\n\nexport default AboutMe;\n","import React from \"react\";\n\nfunction AboutProject() {\n  return (\n    <section className=\"about-project\">\n      <h2 className=\"about-project__title\">О проекте</h2>\n      <ul className=\"about-project__articles\">\n        <li>\n          <h3 className=\"about-project__subtitle\">\n            Дипломный проект включал 5 этапов\n          </h3>\n          <p className=\"about-project__text\">\n            Составление плана, работу над бэкендом, вёрстку, добавление\n            функциональности и финальные доработки.\n          </p>\n        </li>\n        <li>\n          <h3 className=\"about-project__subtitle\">\n            На выполнение диплома ушло 5 недель\n          </h3>\n          <p className=\"about-project__text\">\n            У каждого этапа был мягкий и жёсткий дедлайн, которые нужно было\n            соблюдать, чтобы успешно защититься.\n          </p>\n        </li>\n      </ul>\n\n      <div className=\"about-project__timebar\">\n        <div className=\"about-project__timebar-back\">\n          <div className=\"about-project__timebar-duration about-project__timebar-duration_back-weeks\">\n            1 неделя\n          </div>\n          <p className=\"about-project__timebar-caption\">Back-end</p>\n        </div>\n        <div className=\"about-project__timebar-front\">\n          <div className=\"about-project__timebar-duration about-project__timebar-duration_front-weeks\">\n            4 недели\n          </div>\n          <p className=\"about-project__timebar-caption\">Front-end</p>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nexport default AboutProject;\n","import React from \"react\";\n\nfunction Portfolio() {\n  return (\n    <section className=\"portfolio\">\n      <h3 className=\"portfolio__section-title\">Портфолио</h3>\n      <ul className=\"portfolio__list\">\n        <li className=\"portfolio__list-item\">\n          <a\n            className=\"portfolio__link\"\n            href=\"https://www.facebook.com/olga.lubar\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            <p className=\"portfolio__link-txt\">Статичный сайт</p>\n            <span className=\"portfolio__arrow\">&#8599;</span>\n          </a>\n        </li>\n        <li className=\"portfolio__list-item\">\n          <a\n            className=\"portfolio__link\"\n            href=\"https://github.com/OlgaLiubar\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            <p className=\"portfolio__link-txt\">Адаптивный сайт</p>\n            <span className=\"portfolio__arrow\">&#8599;</span>\n          </a>\n        </li>\n        <li className=\"portfolio__list-item\">\n          <a\n            className=\"portfolio__link\"\n            href=\"https://github.com/OlgaLiubar\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            <p className=\"portfolio__link-txt\">Одностраничное приложение</p>\n            <span className=\"portfolio__arrow\">&#8599;</span>\n          </a>\n        </li>\n      </ul>\n    </section>\n  );\n}\n\nexport default Portfolio;\n","import React from \"react\";\n\nexport default function Promo() {\n  return (\n    <section className=\"promo\">\n      <h1 className=\"promo__title\">\n        Учебный проект студентки факультета Веб-разработки.\n      </h1>\n    </section>\n  );\n}\n","import React from \"react\";\n\nfunction Techs() {\n  return (\n    <section className=\"techs\">\n      <h2 className=\"techs__title\">Технологии</h2>\n      <h3 className=\"techs__section-title\">7 технологий</h3>\n      <p className=\"techs__section-subtitle\">\n        На курсе веб-разработки мы освоили технологии, которые применили в\n        дипломном проекте.\n      </p>\n      <ul className=\"techs__list\">\n        <li className=\"techs__item\">HTML</li>\n        <li className=\"techs__item\">CSS</li>\n        <li className=\"techs__item\">JS</li>\n        <li className=\"techs__item\">React</li>\n        <li className=\"techs__item\">Git</li>\n        <li className=\"techs__item\">Express.js</li>\n        <li className=\"techs__item\">mongoDB</li>\n      </ul>\n    </section>\n  );\n}\n\nexport default Techs;\n","import React from \"react\";\nimport Footer from \"../Footer/Footer\";\nimport Header from \"../Header/Header\";\nimport AboutMe from \"../AboutMe/AboutMe\";\nimport AboutProject from \"../AboutProject/AboutProject\";\nimport Portfolio from \"../Portfolio/Portfolio\";\nimport Promo from \"../Promo/Promo\";\nimport Techs from \"../Techs/Techs\";\n\nexport default function Main({ loggedIn, handleBurgerClick }) {\n  return (\n    <>\n      <Header\n        loggedIn={loggedIn}\n        headerDark=\"header_dark\"\n        handleBurgerClick={handleBurgerClick}\n      />\n      <Promo />\n      <AboutProject />\n      <Techs />\n      <AboutMe />\n      <Portfolio />\n      <Footer />\n    </>\n  );\n}\n","import React from \"react\";\n\nexport default function FilterCheckbox({ handleCheck, isShortFilms }) {\n  function handleChange() {\n    handleCheck();\n  }\n\n  const checkboxActive = isShortFilms\n    ? \"checkbox__input-visible_checked\"\n    : \"checkbox__input-visible\";\n  return (\n    <label className=\"checkbox\" htmlFor=\"filtercheckbox\">\n      <input\n        className=\"checkbox__input\"\n        type=\"checkbox\"\n        onChange={handleChange}\n        checked={isShortFilms}\n        id=\"filtercheckbox\"\n      />\n      <span className={checkboxActive} />\n      Короткометражки\n    </label>\n  );\n}\n","import React, { useCallback } from \"react\";\n\nexport function useFormWithValidation() {\n    const [values, setValues] = React.useState({});\n    const [errors, setErrors] = React.useState({});\n    const [isValid, setIsValid] = React.useState(false);\n  \n    const handleChange = (evt) => {\n      const input = evt.target;\n      const value = input.value;\n      const name = input.name;\n      setValues({ ...values, [name]: value });\n      setErrors({ ...errors, [name]: input.validationMessage });\n      setIsValid(input.closest(\"form\").checkValidity());\n    };\n  \n    const resetForm = useCallback(\n      (newValues = {}, newErrors = {}, newIsValid = false) => {\n        setValues(newValues);\n        setErrors(newErrors);\n        setIsValid(newIsValid);\n      },\n      [setValues, setErrors, setIsValid]\n    );\n  \n    return { values, handleChange, resetForm, errors, isValid, setValues };\n  }","import React from \"react\";\nimport FilterCheckbox from \"../FilterCheckbox/FilterCheckbox\";\nimport { useFormWithValidation } from \"../../hooks/useForm\";\n\nexport default function SearchForm({\n  handleMovieSearch,\n  handleCheck,\n  isShortFilms,\n  localArr,\n  savedMov,\n}) {\n  const { values, handleChange, isValid } = useFormWithValidation({});\n  const [isError, setIsError] = React.useState(false);\n  const errorSelector = isError ? \"error \" : \"error_invisible\";\n\n  const handleChangeInput = (evt) => {\n    handleChange(evt);\n    setIsError(false);\n  };\n\n  function handleSubmit(evt) {\n    setIsError(false);\n    if (evt) {\n      evt.preventDefault();\n    }\n    if (!isValid) {\n      setIsError(true);\n    } else if (!savedMov) {\n      handleMovieSearch(values.input, localArr);\n      localStorage.setItem(\"queryM\", values.input);\n    } else if (savedMov) {\n      localStorage.setItem(\"querySM\", values.input);\n      return handleMovieSearch(values.input, localArr);\n    }\n    return;\n  }\n\n  return (\n    <section className=\"search\">\n      <span className={errorSelector}>Нужно ввести ключевое слово</span>\n      <form className=\"search__form\" noValidate onSubmit={handleSubmit}>\n        <div className=\"search__container\">\n          <input\n            className=\"search__input\"\n            type=\"text\"\n            name=\"input\"\n            placeholder=\"Фильм\"\n            onChange={handleChangeInput}\n          />\n          <button\n            className=\"search__button\"\n            type=\"submit\"\n            value=\"Найти фильм\"\n            id=\"search__button\"\n          />\n        </div>\n        <FilterCheckbox handleCheck={handleCheck} isShortFilms={isShortFilms} />\n      </form>\n    </section>\n  );\n}\n","import React from \"react\";\n\nconst MovieNotFound = () => <p className=\"no-movies\">Ничего не найдено :(</p>;\n\nexport default MovieNotFound;\n","import React from \"react\";\nimport getTimeFromMins from \"../../utils/getTimeFromMins\";\nimport { useLocation } from \"react-router-dom\";\nconst IMG_BASE_URL = \"https://api.nomoreparties.co\";\n\nexport default function MoviesCard({\n  card,\n  onSaveMovie,\n  onDeleteMovie,\n  isSavedMovie,\n}) {\n  const path = useLocation().pathname;\n\n  const savedMovie = isSavedMovie(card);\n\n  function handleButtonChange() {\n    let btnClassName = \"\";\n    if (path === \"/saved-movies\") {\n      btnClassName = \"card__save-button_delete\";\n    } else if (savedMovie) {\n      btnClassName = \"card__save-button_checked\";\n    } else {\n      btnClassName = \"card__save-button\";\n    }\n    return btnClassName;\n  }\n\n  function handleSaveBtnClick() {\n    if (!savedMovie) {\n      onSaveMovie(card);\n      console.log(card);\n    } else {\n      onDeleteMovie(savedMovie._id);\n    }\n  }\n\n  function handleDeleteClick() {\n    onDeleteMovie(card._id);\n    console.log(\"clicked\");\n  }\n\n  return (\n    <li className=\"card\">\n      <a\n        className=\"card__link\"\n        href={card.trailerLink}\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        <img\n          src={card.image.url ? `${IMG_BASE_URL}${card.image.url}` : card.image}\n          alt={card.image.name}\n          className=\"card__image\"\n        />\n      </a>\n      <button\n        className={handleButtonChange()}\n        type=\"button\"\n        onClick={\n          path === \"/saved-movies\" ? handleDeleteClick : handleSaveBtnClick\n        }\n      >\n        {savedMovie || path === \"/saved-movies\" ? \"\" : \"Сохранить\"}\n      </button>\n\n      <div className=\"card__info\">\n        <h2 className=\"card__title\">{card.nameRU}</h2>\n        <p className=\"card__duration\">{getTimeFromMins(card.duration)}</p>\n      </div>\n    </li>\n  );\n}\n","export default function getTimeFromMins(mins) {\n  let hours = Math.trunc(mins / 60);\n  let minutes = mins % 60;\n  return hours + \"ч \" + minutes + \"м\";\n}\n","import React from \"react\";\nimport MovieNotFound from \"../MovieNotFound/MovieNotFound\";\nimport MoviesCard from \"../MoviesCard/MoviesCard\";\n\nexport default function MoviesCardList({\n  cardList,\n  onSaveMovie,\n  isSavedMovie,\n  onDeleteMovie,\n  setMaxNumberOfMovies,\n  maxNumberOfMovies,\n  step,\n  isLoading,\n  notFound,\n  allMovies,\n}) {\n  function handleMoreBtnClick() {\n    return setMaxNumberOfMovies(maxNumberOfMovies + step);\n  }\n\n  const moviesToRender = cardList.slice(0, maxNumberOfMovies);\n\n  return (\n    <section className=\"moviesCardList\">\n      {notFound && !isLoading && <MovieNotFound />}\n      <ul className=\"moviesCardList__gallery\">\n        {moviesToRender.map((card) => (\n          <MoviesCard\n            key={card.id || card._id}\n            card={card}\n            onSaveMovie={onSaveMovie}\n            isSavedMovie={isSavedMovie}\n            onDeleteMovie={onDeleteMovie}\n          />\n        ))}\n      </ul>\n      {allMovies && cardList.length > maxNumberOfMovies && (\n        <button\n          className=\"moviesCardList__more-button\"\n          onClick={handleMoreBtnClick}\n        >\n          Еще\n        </button>\n      )}\n    </section>\n  );\n}\n","import React from \"react\";\nimport \"./Preloader.css\";\n\nconst Preloader = () => {\n  return (\n    <div className=\"preloader\">\n      <div className=\"preloader__container\">\n        <span className=\"preloader__round\"></span>\n      </div>\n    </div>\n  );\n};\n\nexport default Preloader;\n","import React from \"react\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport Header from \"../Header/Header\";\nimport Footer from \"../Footer/Footer\";\nimport Preloader from \"../Preloader/Preloader\";\nimport PropTypes from \"prop-types\";\n\nexport default function Movies({\n  handleBurgerClick,\n  cards,\n  handleMovieSearch,\n  loggedIn,\n  onSaveMovie,\n  isLoading,\n  isSavedMovie,\n  isCheckedForShortFilms,\n  handleCheck,\n  setMaxNumberOfMovies,\n  maxNumberOfMovies,\n  setStep,\n  step,\n  savedMovies,\n  foundMovies,\n  notFound,\n  onDeleteMovie,\n  customErr,\n  fetchErrMsg,\n}) {\n  return (\n    <>\n      <Header handleBurgerClick={handleBurgerClick} loggedIn={loggedIn} />\n      <section className=\"movies\">\n        <SearchForm\n          handleMovieSearch={handleMovieSearch}\n          handleCheck={handleCheck}\n          isShortFilms={isCheckedForShortFilms}\n          localArr={localStorage.movies}\n        />\n        <p className=\"movies__error\">{fetchErrMsg || \"\"}</p>\n        {isLoading && <Preloader />}\n        <MoviesCardList\n          cardList={cards}\n          onSaveMovie={onSaveMovie}\n          isSavedMovie={isSavedMovie}\n          setMaxNumberOfMovies={setMaxNumberOfMovies}\n          maxNumberOfMovies={maxNumberOfMovies}\n          setStep={setStep}\n          step={step}\n          savedMovies={savedMovies}\n          foundMovies={foundMovies}\n          isLoading={isLoading}\n          notFound={notFound}\n          onDeleteMovie={onDeleteMovie}\n          customErr={customErr}\n          allMovies={true}\n        />\n      </section>\n      <Footer />\n    </>\n  );\n}\n\nMovies.propTypes = {\n  handleBurgerClick: PropTypes.func,\n};\n","import React from \"react\";\nimport Header from \"../Header/Header\";\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport Footer from \"../Footer/Footer\";\nimport Preloader from \"../Preloader/Preloader\";\nimport PropTypes from \"prop-types\";\n// import { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\n\nexport default function SavedMovies({\n  isLoading,\n  handleBurgerClick,\n  savedMovies,\n  loggedIn,\n  isSavedMovie,\n  onDeleteMovie,\n  handleMovieSearch,\n  isCheckedForSavedShortFilms,\n  handleCheck,\n  foundSavedMovies,\n  setMaxNumberOfMovies,\n  maxNumberOfMovies,\n  setStep,\n  step,\n  notFound,\n  fetchErrMsg,\n}) {\n\n// const user = React.useContext(CurrentUserContext);\n\n// function filterSavedMovies(moviesArr){\n// const myFoundSavedMovies = moviesArr.filter((movie) => movie.owner == user._id\n// )\n// return myFoundSavedMovies\n// }\n\n  return (\n    <>\n      <Header handleBurgerClick={handleBurgerClick} loggedIn={loggedIn} />\n      <section className=\"saved-movies\">\n        <SearchForm\n          handleMovieSearch={handleMovieSearch}\n          handleCheck={handleCheck}\n          isShortFilms={isCheckedForSavedShortFilms}\n          savedMov={true}\n          localArr={localStorage.savedMovies}\n        />\n        <p className=\"movies__error\">{fetchErrMsg || \"\"}</p>\n        {isLoading && <Preloader />}\n        <MoviesCardList\n          cardList={foundSavedMovies}\n          savedMovies={savedMovies}\n          isSavedMovie={isSavedMovie}\n          onDeleteMovie={onDeleteMovie}\n          setMaxNumberOfMovies={setMaxNumberOfMovies}\n          maxNumberOfMovies={maxNumberOfMovies}\n          setStep={setStep}\n          step={step}\n          notFound={notFound}\n        />\n      </section>\n      <Footer />\n    </>\n  );\n}\n\nSavedMovies.propTypes = {\n  handleBurgerClick: PropTypes.func,\n};\n","import React from \"react\";\n\nexport default function FormButton({ btnName, isValid, isError }) {\n  return (\n    <>\n      <button\n        type=\"submit\"\n        value=\"Отправить\"\n        className={`submit-btn ${\n          (!isValid || isError) && \"submit-btn_disabled\"\n        }`}\n        disabled={!isValid || isError}\n      >\n        {btnName}\n      </button>\n    </>\n  );\n}\n","import React from \"react\";\nimport handleServerError from \"../../utils/handleServerError\";\n\nexport default function FormError({ serverErrMsg, customErr }) {\n  const error = handleServerError(serverErrMsg);\n  return <span className=\"error\">{error == 1 ? customErr : error}</span>;\n}\n","export default function handleServerError(status) {\n\n  if (status == \"Error: 409\") {\n    return \"Пользователь с таким email уже существует.\";\n  } else if (status === \"Error: 401\") {\n    return \"Вы ввели неправильный логин или пароль.\";\n  } else if (status === \"Error: 500\") {\n    return \"На сервере произошла ошибка.\";\n  }\n  return 1;\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport FormButton from \"../FormButton/FormButton\";\nimport FormError from \"../FormError/FormError\";\n\nexport default function AuthForm({\n  title,\n  signUp,\n  btnName,\n  authQuestion,\n  authLinkTxt,\n  linkPath,\n  onChangeInput,\n  errors,\n  values,\n  isValid,\n  onSubmit,\n  serverErrMsg,\n  customErr,\n  resetServerError\n}) {\n\n  function hideError() {\n    resetServerError()\n  }\n  return (\n    <section className=\"auth\">\n      <Link to=\"/\">\n        <div className=\"auth__logo\"></div>\n      </Link>\n      <h1 className=\"auth__title\">{`${title}`}</h1>\n      <form onSubmit={onSubmit} className=\"auth__form\" noValidate>\n        <fieldset className=\"auth__fieldset\">\n          {signUp && (\n            <label className=\"auth__label\">\n              <p className=\"auth__input-name\">Имя</p>\n              <input\n                className=\"auth__input\"\n                minLength={2}\n                maxLength={30}\n                type=\"text\"\n                name=\"name\"\n                onChange={onChangeInput}\n                onFocus={hideError}\n                required\n              />\n              <span className=\"auth__input-error\" id=\"name-error\">\n                {errors.name || \"\"}\n              </span>\n            </label>\n          )}\n          <label className=\"auth__label\">\n            <p className=\"auth__input-name\">E-mail</p>\n            <input\n              className=\"auth__input\"\n              type=\"email\"\n              name=\"email\"\n              required\n              onChange={onChangeInput}\n              onFocus={hideError}\n            />\n            <span className=\"auth__input-error\" id=\"email-error\">\n              {errors.email || \"\"}\n            </span>\n          </label>\n          <label className=\"auth__label\">\n            <p className=\"auth__input-name\">Пароль</p>\n            <input\n              className={\n                !errors.password ? \"auth__input\" : \"auth__input auth__input_invalid\"\n              }\n              minLength={8}\n              type=\"password\"\n              name=\"password\"\n              onChange={onChangeInput}\n              required\n              onFocus={hideError}\n            />\n            <span className=\"auth__input-error\" id=\"password-error\">\n              {errors.password || \"\"}\n            </span>\n          </label>\n        </fieldset>\n        <FormError serverErrMsg={serverErrMsg} customErr={customErr} />\n        <FormButton btnName={btnName} isValid={isValid} values={values} />\n      </form>\n      <p className=\"auth__signed-up\">\n        {authQuestion}\n        <Link to={linkPath} className=\"auth__link\">\n          {authLinkTxt}\n        </Link>\n      </p>\n    </section>\n  );\n}\n","/* eslint-disable react/prop-types */\nimport React from \"react\";\nimport { useFormWithValidation } from \"../../hooks/useForm\";\nimport AuthForm from \"../AuthForm/AuthForm\";\n\nexport default function Login({\n  onSubmit,\n  isLoading,\n  serverErrMsg,\n  customErr,\n  resetServerError\n}) {\n  const { values, handleChange, errors, isValid } = useFormWithValidation();\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    onSubmit(values);\n  };\n\n  return (\n    <AuthForm\n      title=\"Рады видеть!\"\n      signUp={false}\n      btnName=\"Войти\"\n      authQuestion=\"Ещё не зарегистрированы?\"\n      authLinkTxt=\"Регистрация\"\n      linkPath=\"/signup\"\n      onChangeInput={handleChange}\n      onSubmit={handleSubmit}\n      errors={errors}\n      isValid={isValid}\n      isLoading={isLoading}\n      values={values}\n      serverErrMsg={serverErrMsg}\n      customErr={customErr}\n      resetServerError={resetServerError}\n    />\n  );\n}\n","import React from \"react\";\nimport AuthForm from \"../AuthForm/AuthForm\";\nimport { useFormWithValidation } from \"../../hooks/useForm\";\n// import Preloader from \"../Preloader/Preloader\";\n\nexport default function Register({\n  onSubmit,\n  isLoading,\n  serverErrMsg,\n  customErr,\n  resetServerError,\n}) {\n  const { values, handleChange, errors, isValid } = useFormWithValidation();\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    onSubmit(values);\n  };\n\n  return (\n    <>\n      <AuthForm\n        title=\"Добро пожаловать!\"\n        signUp={true}\n        btnName=\"Зарегистрироваться\"\n        authQuestion=\"Уже зарегистрированы?\"\n        authLinkTxt=\"Войти\"\n        linkPath=\"/signin\"\n        onChangeInput={handleChange}\n        onSubmit={handleSubmit}\n        errors={errors}\n        isValid={isValid}\n        isLoading={isLoading}\n        serverErrMsg={serverErrMsg}\n        customErr={customErr}\n        resetServerError={resetServerError}\n      />\n    </>\n  );\n}\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function NotFound() {\n  const history = useHistory();\n  const back = () => history.goBack();\n\n  return (\n    <section className=\"not-found\">\n      <h1 className=\"not-found__title\">404</h1>\n      <p className=\"not-found__subtitle\">Страница не найдена</p>\n      <button type=\"button\" onClick={back} className=\"not-found__button\">\n        Назад\n      </button>\n    </section>\n  );\n}\n","import React from \"react\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\nimport { useFormWithValidation } from \"../../hooks/useForm\";\nimport Header from \"../Header/Header\";\nimport Preloader from \"../Preloader/Preloader\";\nimport FormButton from \"../FormButton/FormButton\";\nimport FormError from \"../FormError/FormError\";\n\nexport default function Profile({\n  handleBurgerClick,\n  handleLogOut,\n  handleUpdateUser,\n  isLoading,\n  loggedIn,\n  customErr,\n  serverErrMsg,\n  isError,\n  resetServerError,\n  successMsg,\n}) {\n  const [isInputDisabled, setIsInputDisabled] = React.useState(true);\n  const { name, email } = React.useContext(CurrentUserContext);\n  const {\n    values,\n    handleChange,\n    errors,\n    isValid,\n    setValues,\n  } = useFormWithValidation();\n\n  React.useEffect(() => {\n    setValues({\n      name,\n      email,\n    });\n  }, [name, email]);\n\n  React.useEffect(() => {\n    resetServerError();\n  }, []);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    handleUpdateUser(values);\n    setIsInputDisabled(true);\n  }\n\n  function toggleInput() {\n    setIsInputDisabled(!isInputDisabled);\n  }\n\n  return (\n    <>\n      <Header handleBurgerClick={handleBurgerClick} loggedIn={loggedIn} />\n      <section className=\"profile\">\n        <h1 className=\"profile__title\">{`Привет, ${name}!`}</h1>\n        <p className=\"profile__success\">{successMsg || \"\"}</p>\n        <form\n          className=\"profile__form\"\n          name=\"profile\"\n          onSubmit={handleSubmit}\n          noValidate\n        >\n          {isLoading ? (\n            <Preloader />\n          ) : (\n            <>\n              <div className=\"profile__inputs\">\n                <label className=\"profile__label\">\n                  <span className=\"profile__input-title\">Имя</span>\n                  <input\n                    type=\"text\"\n                    name=\"name\"\n                    id=\"name-input\"\n                    className=\"profile__input\"\n                    minLength={2}\n                    maxLength={30}\n                    required\n                    value={values.name || \"\"}\n                    onChange={handleChange}\n                    disabled={isInputDisabled}\n                  />\n                </label>\n                <span className=\"profile__input-error\">\n                  {errors.name || \"\"}\n                </span>\n                <label className=\"profile__label\">\n                  <span className=\"profile__input-title\">E-mail</span>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    className=\"profile__input\"\n                    id=\"email-input\"\n                    required\n                    disabled={isInputDisabled}\n                    value={values.email || \"\"}\n                    onChange={handleChange}\n                  />\n                </label>\n                <span className=\"profile__input-error\">\n                  {errors.email || \"\"}\n                </span>\n              </div>\n\n              {values.name === name && values.email === email ? (\n                <div className=\"profile__edit-group\">\n                  <button\n                    type=\"button\"\n                    value=\"Edit\"\n                    className={`profile__submit-btn ${\n                      isInputDisabled ? \"\" : \"profile__submit-btn_clicked\"\n                    }`}\n                    onClick={toggleInput}\n                  >\n                    Редактировать\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"profile__signout-btn\"\n                    value=\"Signout\"\n                    onClick={handleLogOut}\n                  >\n                    Выйти из аккаунта\n                  </button>\n                </div>\n              ) : (\n                <>\n                  <FormError\n                    serverErrMsg={serverErrMsg}\n                    customErr={customErr}\n                  />\n                  <FormButton\n                    btnName=\"Сохранить\"\n                    isError={isError}\n                    isValid={isValid}\n                  />\n                </>\n              )}\n            </>\n          )}\n        </form>\n      </section>\n    </>\n  );\n}\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport AccountButton from \"../AccountButton/AccountButton\";\n\nexport default function Sidebar({ isOpen, onClose }) {\n  const handleOverlayClose = (event) => {\n    if (event.target === event.currentTarget && isOpen) {\n      onClose();\n    }\n  };\n\n  return (\n    <div\n      className={`sidebar__overlay ${isOpen ? \"sidebar__overlay_opened\" : \"\"}`}\n      onMouseDown={handleOverlayClose}\n    >\n      <div className=\"sidebar\">\n        <button\n          type=\"button\"\n          className=\"sidebar__close-btn\"\n          onClick={onClose}\n        ></button>\n        <nav className=\"sidebar__menu\">\n          <ul className=\"sidebar__menu-list\">\n            <li className=\"sidebar__menu-item\">\n              <NavLink\n                to={`/`}\n                className=\"sidebar__menu-link\"\n                onClick={onClose}\n              >\n                Главная\n              </NavLink>\n            </li>\n            <li className=\"sidebar__menu-item\">\n              <NavLink\n                to={`/movies`}\n                className=\"sidebar__menu-link\"\n                activeClassName=\"sidebar__menu-link_active\"\n                onClick={onClose}\n              >\n                Фильмы\n              </NavLink>\n            </li>\n            <li className=\"sidebar__menu-item\">\n              <NavLink\n                to={`/saved-movies`}\n                className=\"sidebar__menu-link\"\n                activeClassName=\"sidebar__menu-link_active\"\n                onClick={onClose}\n              >\n                Сохранённые фильмы\n              </NavLink>\n            </li>\n          </ul>\n          <div onClick={onClose}>\n            <AccountButton />\n          </div>\n        </nav>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {() => (props.loggedIn ? <Component {...props} /> : <Redirect to=\"/\" />)}\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;\n","export default function filterMovies(localMoviesArr, query, shortFilms) {\n  let filteredMovies = [];\n\n  if (localMoviesArr) {\n    filteredMovies = localMoviesArr.filter((movie) => {\n      return movie.nameRU.toUpperCase().includes(query.toUpperCase());\n    });\n  }\n  if (shortFilms) {\n    filteredMovies = filteredMovies.filter((movie) => movie.duration <= 40);\n  }\n  return filteredMovies;\n}\n","function getNumberOfMovies(width) {\n    let maxNumberOfMovies;\n    let step;\n  \n    if (width > 980) {\n        maxNumberOfMovies = 12;\n      step = 3;\n    } else if (width >= 500 && width <= 980) {\n        maxNumberOfMovies = 8;\n      step = 2;\n    } else if (width < 500) {\n        maxNumberOfMovies = 5;\n      step = 2;\n    }\n    return { maxNumberOfMovies, step };\n  }\n  \n  export default getNumberOfMovies;","import React, { useLayoutEffect } from \"react\";\nimport { Route, Switch, useHistory, Redirect } from \"react-router-dom\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\nimport \"./App.css\";\n\nimport moviesApi from \"../../utils/MoviesApi\";\nimport { auth } from \"../../utils/AuthApi\";\nimport api from \"../../utils/MainApi\";\n\nimport Main from \"../Main/Main\";\nimport Movies from \"../Movies/Movies\";\nimport SavedMovies from \"../SavedMovies/SavedMovies\";\nimport Login from \"../Login/Login\";\nimport Register from \"../Register/Register\";\nimport NotFound from \"../NotFound/NotFound\";\nimport Profile from \"../Profile/Profile\";\nimport Sidebar from \"../Sidebar/Sidebar\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\n\nimport filterMovies from \"../../utils/filterMovies\";\nimport getNumberOfMovies from \"../../utils/getNumberOfMovies\";\nimport { SUCCESS_MSG } from \"../../utils/constants\";\nimport { FETCH_MOVIES_ERR } from \"../../utils/constants\";\n\nexport default function App() {\n  const history = useHistory();\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n\n  const [isSidebarOpen, setIsSidebarOpen] = React.useState(false);\n\n  const [foundMovies, setFoundMovies] = React.useState([]);\n  const [foundSavedMovies, setFoundSavedMovies] = React.useState([]);\n  const [savedMovies, setSavedMovies] = React.useState([]);\n\n  const [width, setWidth] = React.useState(window.innerWidth);\n  const [isResizing, setIsResizing] = React.useState(false);\n  const [maxNumberOfMovies, setMaxNumberOfMovies] = React.useState(0);\n  const [step, setStep] = React.useState(0);\n\n  const [isCheckedForShortFilms, setIsCheckedForShortFilms] = React.useState(\n    false\n  );\n  const [\n    isCheckedForSavedShortFilms,\n    setIsCheckedForSavedShortFilms,\n  ] = React.useState(false);\n\n  const [customErr, setCustomErr] = React.useState(\"\");\n  const [serverErrMsg, setServerErrMsg] = React.useState(\"\");\n  const [isError, setIsError] = React.useState(false);\n\n  const [isNotFound, setIsNotFound] = React.useState(false);\n  const [isNotFoundSaved, setIsNotFoundSaved] = React.useState(false);\n\n  const [successMsg, setSuccessMsg] = React.useState(\"\");\n  const [fetchErrMsg, setFetchErrMsg] = React.useState(\"\");\n\n  function handleBurgerClick() {\n    setIsSidebarOpen(true);\n  }\n\n  function closeSidebar() {\n    setIsSidebarOpen(false);\n  }\n\n  function handleServerError(err) {\n    setServerErrMsg(err);\n  }\n\n  function resetServerError() {\n    setServerErrMsg(\"\");\n    setCustomErr(\"\");\n  }\n\n  function getUserData() {\n    api\n      .getUserData()\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .catch((err) => {\n        console.log(`${err}`);\n      });\n  }\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      api\n        .getSavedMovies()\n        .then((savedMovies) => {\n          const mySavedMovies = savedMovies.filter(\n            (movie) => movie.owner == currentUser._id\n          );\n          setSavedMovies(mySavedMovies);\n          setFoundSavedMovies(mySavedMovies);\n          localStorage.setItem(\"savedMovies\", JSON.stringify(mySavedMovies));\n        })\n        .catch((err) => {\n          setFetchErrMsg(FETCH_MOVIES_ERR);\n          console.log(`${err}`);\n        });\n    }\n  }, [loggedIn]);\n\n  React.useEffect(() => {\n    setIsLoading(true);\n    if (loggedIn) {\n      api\n        .getUserData()\n        .then((res) => {\n          setCurrentUser(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n        .finally(() => setIsLoading(false));\n    } else {\n      setIsLoading(false);\n    }\n  }, [loggedIn]);\n\n  console.log(loggedIn);\n\n  React.useEffect(() => {\n    if(loggedIn){\n      auth\n      .getContent()\n      .then((res) => {\n        if (res) {\n          setLoggedIn(true);\n        }\n      })\n      .catch((err) => console.log(err));\n    }\n  }, [loggedIn]);\n\n  function handleRegister({ name, email, password }) {\n    setIsLoading(true);\n    auth\n      .register(name, email, password)\n      .then(() => {\n        handleLogin({ email, password });\n        resetServerError();\n      })\n      .catch((err) => {\n        handleServerError(err);\n        setCustomErr(\"При регистрации пользователя произошла ошибка.\");\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  function handleLogin({ email, password }) {\n    setIsLoading(true);\n    auth\n      .signIn({ email, password })\n      .then(() => {\n        getUserData();\n        setLoggedIn(true);\n        resetServerError();\n        history.push(\"/movies\");\n      })\n      .catch((err) => {\n        handleServerError(err);\n        setCustomErr(\"При авторизации произошла ошибка.\");\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  function handleUpdateUser({ name, email }) {\n    setIsLoading(true);\n    api\n      .uploadUserInfo({ name, email })\n      .then((user) => {\n        resetServerError();\n        setSuccessMsg(SUCCESS_MSG);\n        setCurrentUser(user);\n      })\n      .catch((err) => {\n        handleServerError(err);\n        setCustomErr(\"При обновлении профиля произошла ошибка.\");\n        setIsError(true);\n      })\n      .finally(() => setIsLoading(false));\n  }\n\n  function clearData() {\n    setLoggedIn(false);\n    localStorage.clear();\n  }\n\n  function handleLogOut() {\n    setIsLoading(true);\n    auth\n      .signOut()\n      .then(() => {\n        setFoundMovies([]);\n        setFoundSavedMovies([]);\n        clearData();\n        history.push(\"/\");\n      })\n      .catch((err) => {\n        console.log(`${err}`);\n      })\n      .finally(() => setIsLoading(false));\n  }\n\n  function handleMovieSearch(query, localArr) {\n    if (localArr === localStorage.movies) {\n      const filteredMovies = filterMovies(\n        JSON.parse(localArr),\n        query,\n        isCheckedForShortFilms\n      );\n      handleNoFoundMovies(filteredMovies);\n      setFoundMovies(filteredMovies);\n    } else {\n      const filteredMovies = filterMovies(\n        JSON.parse(localArr),\n        query,\n        isCheckedForSavedShortFilms\n      );\n      handleNoFoundSavedMovies(filteredMovies);\n      setFoundSavedMovies(filteredMovies);\n    }\n  }\n\n  function handleNoFoundMovies(filteredMovies) {\n    if (filteredMovies.length == 0) {\n      setIsNotFound(true);\n    } else {\n      setIsNotFound(false);\n    }\n  }\n\n  function handleNoFoundSavedMovies(filteredMovies) {\n    if (filteredMovies.length == 0) {\n      setIsNotFoundSaved(true);\n    } else {\n      setIsNotFoundSaved(false);\n    }\n  }\n\n  React.useEffect(() => {\n    if (localStorage.movies && localStorage.queryM) {\n      const filteredMovies = filterMovies(\n        JSON.parse(localStorage.movies),\n        localStorage.queryM,\n        isCheckedForShortFilms\n      );\n      handleNoFoundMovies(filteredMovies);\n      setFoundMovies(filteredMovies);\n    }\n    return;\n  }, [isCheckedForShortFilms]);\n\n  React.useEffect(() => {\n    if (localStorage.savedMovies && localStorage.querySM) {\n      const filteredMovies = filterMovies(\n        JSON.parse(localStorage.savedMovies),\n        localStorage.querySM,\n        isCheckedForSavedShortFilms\n      );\n      handleNoFoundSavedMovies(filteredMovies);\n      setFoundSavedMovies(filteredMovies);\n    }\n    return;\n  }, [isCheckedForSavedShortFilms]);\n\n  React.useEffect(() => {\n    if (localStorage.savedMovies) {\n      if (isCheckedForSavedShortFilms == true) {\n        const filteredMovies = JSON.parse(localStorage.savedMovies).filter(\n          (movie) => movie.duration <= 40\n        );\n        setFoundSavedMovies(filteredMovies);\n      } else {\n        setFoundSavedMovies(savedMovies);\n      }\n    }\n    return;\n  }, [isCheckedForSavedShortFilms]);\n\n  React.useEffect(() => {\n    setIsLoading(true);\n    if (!localStorage.movies) {\n      moviesApi\n        .getMovies()\n        .then((res) => {\n          const movies = res.map((movie) => {\n            return {\n              ...movie,\n              movieId: movie.id,\n            };\n          });\n          localStorage.setItem(\"movies\", JSON.stringify(movies));\n        })\n        .catch((err) => {\n          setFetchErrMsg(FETCH_MOVIES_ERR);\n          console.log(`${err}`);\n        })\n        .finally(() => setIsLoading(false));\n    }\n  }, [loggedIn]);\n\n  // function getSavedMovies() {\n  //   setIsLoading(true);\n  //   api\n  //     .getSavedMovies()\n  //     .then((savedMovies) => {\n  //       setSavedMovies(savedMovies);\n  //       localStorage.setItem(\"savedMovies\", JSON.stringify(savedMovies));\n  //     })\n  //     .catch((err) => {\n  //       setFetchErrMsg(FETCH_MOVIES_ERR);\n  //       console.log(`${err}`);\n  //     })\n  //     .finally(() => setIsLoading(false));\n  // }\n\n  function getSavedMovies() {\n    setIsLoading(true);\n    api\n      .getSavedMovies()\n      .then((savedMovies) => {\n        const mySavedMovies = savedMovies.filter(\n          (movie) => movie.owner == currentUser._id\n        );\n        setSavedMovies(mySavedMovies);\n        localStorage.setItem(\"savedMovies\", JSON.stringify(savedMovies));\n      })\n      .catch((err) => {\n        setFetchErrMsg(FETCH_MOVIES_ERR);\n        console.log(`${err}`);\n      })\n      .finally(() => setIsLoading(false));\n  }\n\n  function handleSaveMovie(movie) {\n    api\n      .saveMovieCard(movie)\n      .then((savedCard) => {\n        getSavedMovies();\n        setFoundSavedMovies([...foundSavedMovies, savedCard]);\n      })\n      .catch((err) => console.log(`Добавление карточки: ${err}`))\n      .finally(() => console.log(\"Уф, сохранили!\"));\n  }\n\n  function isSavedMovie(card) {\n    const savedMovie = savedMovies.find((item) => item.movieId === card.id);\n    return savedMovie;\n  }\n\n  function handleRemoveSavedMovie(movieId) {\n    api\n      .deleteMovie(movieId)\n      .then((deletedMovie) => {\n        const newSavedMovies = foundSavedMovies.filter(\n          (movie) => movie._id !== deletedMovie.data._id\n        );\n        setFoundSavedMovies(newSavedMovies);\n        getSavedMovies();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleCheckMovies() {\n    setIsCheckedForShortFilms(!isCheckedForShortFilms);\n  }\n\n  function handleCheckSavedMovies() {\n    setIsCheckedForSavedShortFilms(!isCheckedForSavedShortFilms);\n  }\n\n  useLayoutEffect(() => {\n    function updateWidth() {\n      if (!isResizing) {\n        setIsResizing(true);\n        setTimeout(() => {\n          setWidth(window.innerWidth);\n          setIsResizing(false);\n        }, 700);\n      }\n    }\n    window.addEventListener(\"resize\", updateWidth);\n    updateWidth();\n    return () => window.removeEventListener(\"resize\", updateWidth);\n  }, []);\n\n  React.useEffect(() => {\n    const { maxNumberOfMovies, step } = getNumberOfMovies(width);\n    setMaxNumberOfMovies(maxNumberOfMovies);\n    setStep(step);\n  }, [width]);\n\n  React.useEffect(() => {\n    setTimeout(() => {\n      setSuccessMsg(\"\");\n    }, 2000);\n  }, [successMsg]);\n\n  React.useEffect(() => {\n    setTimeout(() => {\n      setSuccessMsg(\"\");\n    }, 2000);\n  }, [fetchErrMsg]);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Switch>\n          <Route path=\"/\" exact>\n            <Main loggedIn={loggedIn} handleBurgerClick={handleBurgerClick} />\n          </Route>\n\n          <ProtectedRoute\n            path=\"/movies\"\n            component={Movies}\n            handleMovieSearch={handleMovieSearch}\n            handleBurgerClick={handleBurgerClick}\n            cards={foundMovies}\n            loggedIn={loggedIn}\n            isLoading={isLoading}\n            onSaveMovie={handleSaveMovie}\n            isSavedMovie={isSavedMovie}\n            isCheckedForShortFilms={isCheckedForShortFilms}\n            handleCheck={handleCheckMovies}\n            setMaxNumberOfMovies={setMaxNumberOfMovies}\n            maxNumberOfMovies={maxNumberOfMovies}\n            setStep={setStep}\n            step={step}\n            savedMovies={savedMovies}\n            notFound={isNotFound}\n            onDeleteMovie={handleRemoveSavedMovie}\n            fetchErrMsg={fetchErrMsg}\n          />\n\n          <ProtectedRoute\n            path=\"/saved-movies\"\n            component={SavedMovies}\n            handleMovieSearch={handleMovieSearch}\n            handleBurgerClick={handleBurgerClick}\n            foundSavedMovies={foundSavedMovies}\n            savedMovies={savedMovies}\n            loggedIn={loggedIn}\n            isLoading={isLoading}\n            onDeleteMovie={handleRemoveSavedMovie}\n            isCheckedForSavedShortFilms={isCheckedForSavedShortFilms}\n            handleCheck={handleCheckSavedMovies}\n            isSavedMovie={isSavedMovie}\n            notFound={isNotFoundSaved}\n            fetchErrMsg={fetchErrMsg}\n          />\n\n          <ProtectedRoute\n            path=\"/profile\"\n            component={Profile}\n            loggedIn={loggedIn}\n            handleBurgerClick={handleBurgerClick}\n            handleLogOut={handleLogOut}\n            handleUpdateUser={handleUpdateUser}\n            isLoading={isLoading}\n            serverErrMsg={serverErrMsg}\n            customErr={customErr}\n            isError={isError}\n            resetServerError={resetServerError}\n            successMsg={successMsg}\n          />\n\n          <Route path=\"/signup\">\n            {loggedIn ? (\n              <Redirect to=\"/movies\" />\n            ) : (\n              <Register\n                isLoading={isLoading}\n                onSubmit={handleRegister}\n                serverErrMsg={serverErrMsg}\n                customErr={customErr}\n                isError={isError}\n                resetServerError={resetServerError}\n              />\n            )}\n          </Route>\n\n          <Route path=\"/signin\">\n            {loggedIn ? (\n              <Redirect to=\"/movies\" />\n            ) : (\n              <Login\n                isLoading={isLoading}\n                onSubmit={handleLogin}\n                serverErrMsg={serverErrMsg}\n                customErr={customErr}\n                isError={isError}\n                resetServerError={resetServerError}\n              />\n            )}\n          </Route>\n\n          <Route path=\"*\">\n            <NotFound />\n          </Route>\n        </Switch>\n        <Sidebar isOpen={isSidebarOpen} onClose={closeSidebar} />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter> \n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n); \n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}